<!DOCTYPE html>
<html>
	<head>
		<title>R osnove</title>
		<meta
			http-equiv="Content-type"
			content="text/html;charset=UTF-8" />
		<link
			rel="preconnect"
			href="https://fonts.googleapis.com" />
		<link
			rel="preconnect"
			href="https://fonts.gstatic.com"
			crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
			rel="stylesheet" />
		<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <style>
			/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
			/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
 :not(code *, .hljs *, .MathJax *) {
				font-family: "Poppins", sans-serif;
			}
            html {
                display: flex;
                justify-content: center;
            }
			body {
				font-family: var(
					--vscode-markdown-font-family,
					-apple-system,
					BlinkMacSystemFont,
					"Segoe WPC",
					"Segoe UI",
					"Ubuntu",
					"Droid Sans",
					sans-serif
				);
				font-size: var(--vscode-markdown-font-size, 14px);
				line-height: var(--vscode-markdown-line-height, 22px);
				word-wrap: break-word;
				color: #3b3b3b;
                position: absolute;
                display: flex;
                justify-content: center;
                width: full;
			}
			.body {
                max-width: 1012px;
			}

			#code-csp-warning {
				position: fixed;
				top: 0;
				right: 0;
				color: white;
				margin: 16px;
				text-align: center;
				font-size: 12px;
				font-family: sans-serif;
				background-color: #444444;
				cursor: pointer;
				padding: 6px;
				box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.25);
			}

			#code-csp-warning:hover {
				text-decoration: none;
				background-color: #007acc;
				box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.25);
			}

			body.scrollBeyondLastLine {
				margin-bottom: calc(100vh - 22px);
			}

			body.showEditorSelection .code-line {
				position: relative;
			}

			body.showEditorSelection .code-active-line:before,
			body.showEditorSelection .code-line:hover:before {
				content: "";
				display: block;
				position: absolute;
				top: 0;
				left: -12px;
				height: 100%;
			}

			body.showEditorSelection li.code-active-line:before,
			body.showEditorSelection li.code-line:hover:before {
				left: -30px;
			}

			.vscode-light.showEditorSelection .code-active-line:before {
				border-left: 3px solid rgba(0, 0, 0, 0.15);
			}

			.vscode-light.showEditorSelection .code-line:hover:before {
				border-left: 3px solid rgba(0, 0, 0, 0.4);
			}

			.vscode-light.showEditorSelection
				.code-line
				.code-line:hover:before {
				border-left: none;
			}

			.vscode-dark.showEditorSelection .code-active-line:before {
				border-left: 3px solid rgba(255, 255, 255, 0.4);
			}

			.vscode-dark.showEditorSelection .code-line:hover:before {
				border-left: 3px solid rgba(255, 255, 255, 0.6);
			}

			.vscode-dark.showEditorSelection
				.code-line
				.code-line:hover:before {
				border-left: none;
			}

			.vscode-high-contrast.showEditorSelection .code-active-line:before {
				border-left: 3px solid rgba(255, 160, 0, 0.7);
			}

			.vscode-high-contrast.showEditorSelection .code-line:hover:before {
				border-left: 3px solid rgba(255, 160, 0, 1);
			}

			.vscode-high-contrast.showEditorSelection
				.code-line
				.code-line:hover:before {
				border-left: none;
			}

			img {
				max-width: 100%;
				max-height: 100%;
				border-radius: 8px;
				filter: drop-shadow(-0 2px 2px rgba(0, 0, 0, 0.07));
			}

			a {
				text-decoration: none;
			}

			a:hover {
				text-decoration: underline;
			}

			a:focus,
			input:focus,
			select:focus,
			textarea:focus {
				outline: 1px solid -webkit-focus-ring-color;
				outline-offset: -1px;
			}

			hr {
				border: 0;
				height: 2px;
				border-bottom: 2px solid;
			}

			h1 {
				padding-bottom: 0.3em;
				line-height: 1.2;
				border-bottom-width: 1px;
				border-bottom-style: solid;
			}

			h1,
			h2,
			h3 {
				font-weight: normal;
			}

			table {
				border-collapse: collapse;
			}

			table > thead > tr > th {
				text-align: left;
				border-bottom: 1px solid;
			}

			table > thead > tr > th,
			table > thead > tr > td,
			table > tbody > tr > th,
			table > tbody > tr > td {
				padding: 5px 10px;
			}

			table > tbody > tr + tr > td {
				border-top: 1px solid;
			}

			blockquote {
				margin: 0 7px 0 5px;
				padding: 0 16px 0 10px;
				border-left-width: 5px;
				border-left-style: solid;
			}

			code {
				font-family: Menlo, Monaco, Consolas, "Droid Sans Mono",
					"Courier New", monospace, "Droid Sans Fallback";
				font-size: 1em;
				line-height: 1.357em;
			}

			body.wordWrap pre {
				white-space: pre-wrap;
			}

			pre:not(.hljs),
			pre.hljs code > div {
				padding: 16px;
				border-radius: 3px;
				overflow: auto;
			}

			pre code {
				color: var(--vscode-editor-foreground);
				tab-size: 4;
			}

			/** Theming */

			.vscode-light pre {
				background-color: rgba(220, 220, 220, 0.4);
			}

			.vscode-dark pre {
				background-color: rgba(10, 10, 10, 0.4);
			}

			.vscode-high-contrast pre {
				background-color: rgb(0, 0, 0);
			}

			.vscode-high-contrast h1 {
				border-color: rgb(0, 0, 0);
			}

			.vscode-light table > thead > tr > th {
				border-color: rgba(0, 0, 0, 0.69);
			}

			.vscode-dark table > thead > tr > th {
				border-color: rgba(255, 255, 255, 0.69);
			}

			.vscode-light h1,
			.vscode-light hr,
			.vscode-light table > tbody > tr + tr > td {
				border-color: rgba(0, 0, 0, 0.18);
			}

			.vscode-dark h1,
			.vscode-dark hr,
			.vscode-dark table > tbody > tr + tr > td {
				border-color: rgba(255, 255, 255, 0.18);
			}
		</style>

		<style>
			/*

Visual Studio-like style based on original C# coloring by Jason Diamond <jason@diamond.name>

*/
			.hljs {
				background: white;
				color: black;
			}

			.hljs-comment,
			.hljs-quote,
			.hljs-variable {
				color: #008000;
			}

			.hljs-keyword,
			.hljs-selector-tag,
			.hljs-built_in,
			.hljs-name,
			.hljs-tag {
				color: #00f;
			}

			.hljs-string,
			.hljs-title,
			.hljs-section,
			.hljs-attribute,
			.hljs-literal,
			.hljs-template-tag,
			.hljs-template-variable,
			.hljs-type,
			.hljs-addition {
				color: #a31515;
			}

			.hljs-deletion,
			.hljs-selector-attr,
			.hljs-selector-pseudo,
			.hljs-meta {
				color: #2b91af;
			}

			.hljs-doctag {
				color: #808080;
			}

			.hljs-attr {
				color: #f00;
			}

			.hljs-symbol,
			.hljs-bullet,
			.hljs-link {
				color: #00b0e8;
			}

			.hljs-emphasis {
				font-style: italic;
			}

			.hljs-strong {
				font-weight: bold;
			}
		</style>

		<style>
			/*
 * Markdown PDF CSS
 */

			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC",
					"Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
			}

			pre {
				background-color: #f8f8f8;
				border: 1px solid #cccccc;
				border-radius: 3px;
				overflow-x: auto;
				white-space: pre-wrap;
				overflow-wrap: break-word;
			}

			pre:not(.hljs) {
				padding: 23px;
				line-height: 19px;
			}

			blockquote {
				background: rgba(127, 127, 127, 0.1);
				border-color: rgba(0, 122, 204, 0.5);
			}

			.emoji {
				height: 1.4em;
			}

			code {
				font-size: 14px;
				line-height: 19px;
			}

			/* for inline code */
			:not(pre):not(.hljs) > code {
				color: #3b3b3b; /* Change the old color so it seems less like an error */
				font-size: inherit;
				background: #e0e0e0;
				border-radius: 4px;
				padding: 1px 2px;
				margin: -1px -2px;
			}

			/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
			.page {
				page-break-after: always;
			}
		</style>

		<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
	</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<div class="body">
<h1 id="analiza-podataka-i-obrada-informacija">Analiza podataka i obrada informacija</h1>
<p><strong>Nositelj</strong>: izv. prof. dr. sc. Siniša Sovilj <br>
<strong>Asistent</strong>: mag. inf. Alesandro Žužić</p>
<p><strong>Ustanova</strong>: Sveučilište Jurja Dobrile u Puli, Fakultet informatike u Puli</p>
<p style="float: clear; display: flex; gap: 8px; align-items: center;" class="font-brioni text-sm whitespace-nowrap">
    <img src="../Logo/fipu_logo.svg" style="height: 96px; box-shadow: none !important;" class="mr-4"></img>
    Fakultet informatike u Puli
</p>
<h1 id="3-korelacija-i-regresija-vremenski-nizovi-klasifikacija-i-grupiranje">[3] Korelacija i regresija, vremenski nizovi, klasifikacija i grupiranje</h1>
<div style="display: flex; justify-content: space-between; text-align: justify; gap: 32px;">
    <p>
        <b>Korelacija</b> mjeri linearnu povezanost između varijabli. <b>Regresija</b> modelira odnose za predviđanje vrijednosti. <b>Vremenski nizovi</b> analiziraju podatke ovisne o vremenu. <b>Klasifikacija</b> dodjeljuje podatke unaprijed definiranim kategorijama, dok <b>grupiranje</b> (klasteriranje) automatski identificira prirodne grupe u podacima. U R-u se koriste funkcije poput <code>cor()</code>, <code>lm()</code>, <code>forecast()</code>, <code>rpart()</code> i <code>kmeans()</code>, a vizualizacija pomaže u interpretaciji rezultata.
    </p>
    <img src="../Icons/R_3.svg" style="width: 96px; height: 96px; margin: 0px;"></img> 
</div>
<p><strong>Posljednje ažurirano:</strong> 21. svibnja 2025.</p>
<!-- TOC -->
<ul>
<li><a href="#analiza-podataka-i-obrada-informacija">Analiza podataka i obrada informacija</a></li>
<li><a href="#3-korelacija-i-regresija-vremenski-nizovi-klasifikacija-i-grupiranje">[3] Korelacija i regresija, vremenski nizovi, klasifikacija i grupiranje</a>
<ul>
<li><a href="#korelacija">Korelacija</a>
<ul>
<li><a href="#%C4%8Detiri-osnovna-tipa-korelacijskih-odnosa">Četiri osnovna tipa korelacijskih odnosa:</a></li>
<li><a href="#koeficijenti-korelacije">Koeficijenti korelacije</a>
<ul>
<li><a href="#pearsonov-koeficijent-korelacije">Pearsonov koeficijent korelacije</a></li>
<li><a href="#spearmanov-koeficijent-korelacije">Spearmanov koeficijent korelacije</a></li>
</ul>
</li>
<li><a href="#matrica-korelacije">Matrica korelacije</a></li>
<li><a href="#outlieri-u-korelacijskoj-analizi">Outlieri u korelacijskoj analizi</a></li>
<li><a href="#kovarijanca">Kovarijanca</a></li>
<li><a href="#multikolinearnost">Multikolinearnost</a></li>
</ul>
</li>
<li><a href="#regresijska-analiza">Regresijska analiza</a>
<ul>
<li><a href="#linearna-regresija">Linearna regresija</a></li>
<li><a href="#logisti%C4%8Dka-regresija">Logistička regresija</a></li>
<li><a href="#izra%C4%8Dunavanje-vjerojatnosti">Izračunavanje vjerojatnosti</a></li>
</ul>
</li>
<li><a href="#vremenski-nizovi">Vremenski nizovi</a>
<ul>
<li><a href="#analiza-vremenskih-nizova">Analiza vremenskih nizova</a></li>
<li><a href="#dekompozicija-vremenskog-niza">Dekompozicija vremenskog niza</a>
<ul>
<li><a href="#stl-metoda">STL metoda</a></li>
</ul>
</li>
<li><a href="#aditivna-i-multiplikativna-dekompozicija-vremenskog-niza">Aditivna i multiplikativna dekompozicija vremenskog niza</a>
<ul>
<li><a href="#aditivna-dekompozicija">Aditivna dekompozicija</a></li>
<li><a href="#multiplikativna-dekompozicija">Multiplikativna dekompozicija</a></li>
</ul>
</li>
<li><a href="#stacionarnosti-vremenskog-niza">Stacionarnosti vremenskog niza</a>
<ul>
<li><a href="#provjera-stacionarnosti">Provjera stacionarnosti</a></li>
<li><a href="#prilagodba-niza-za-stacionarnost">Prilagodba niza za stacionarnost</a></li>
</ul>
</li>
<li><a href="#acf-i-pacf">ACF i PACF</a>
<ul>
<li><a href="#acf-autocorrelation-function">ACF Autocorrelation Function</a></li>
<li><a href="#pacf-partial-autocorrelation-function">PACF Partial Autocorrelation Function</a></li>
<li><a href="#kori%C5%A1tenje-acf-i-pacf-u-modeliranju">Korištenje ACF i PACF u modeliranju</a></li>
</ul>
</li>
<li><a href="#arima-model">ARIMA model</a></li>
</ul>
</li>
<li><a href="#klasifikacija">Klasifikacija</a>
<ul>
<li><a href="#stablo-odluke">Stablo odluke</a></li>
<li><a href="#random-forest">Random forest</a></li>
</ul>
</li>
<li><a href="#grupiranje">Grupiranje</a>
<ul>
<li><a href="#k-means">K-means</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->
<div class="page"></div>
<h2 id="korelacija">Korelacija</h2>
<p><strong>Korelacija</strong> kvantificira statističku povezanost između <strong>dvije numeričke</strong> varijable, pokazujući koliko se one zajedno mijenjaju. Povezanost znači da je vrijednost jedne varijable s nekom vjerojatnošću moguće predvidjeti na osnovi saznanja o vrijednosti druge varijable.</p>
<p>Promjena vrijednosti jedne varijable utječe na promjenu vrijednosti druge varijable. Varijabla koja svojom vrijednošću utječe na drugu varijablu naziva se <strong>neovisna varijabla</strong>. Varijabla na koju se utječe naziva se <strong>ovisna varijabla</strong>.</p>
<blockquote>
<p>Mogući su slučajevi da dvije varijable istovremeno utječu jedna na drugu, pa su u tom slučaju obje varijable istovremeno i ovisne i neovisne.</p>
</blockquote>
<p><em>U R-u korelacija se računa s pomoću sljedeće funkcije:</em></p>
<pre class="hljs"><code><div>cor(x, y)
</div></code></pre>
<p>Međusoban odnos između dvije varijable, grafički možemo prikazati s pomoću dvodimenzionalnog grafa, tzv. <strong>scatter dijagram</strong> (dijagrama raspršenja).</p>
<div style="width: 100%; display: flex; justify-content: center;">
    <img src="images/korelacija_base.png"  width="75%"/>
</div>
<p>Ovisno o međusobnom odnosu dvaju varijabli među kojima postoji korelacija, ona može biti <strong>linearna</strong> ili <strong>nelinearna</strong>.</p>
<ul>
<li>Kod <strong>linearne korelacije</strong>, točke su grupirane oko pravca.</li>
<li>Kod <strong>nelinearne korelacije</strong>, točke su grupirane oko neke druge krivulje.</li>
</ul>
<div style="width: 100%; display: flex; justify-content: center;">
    <img src="images/linearna_vs_nelinearna_korelacija.png"/>
</div>
<h3 id="%C4%8Detiri-osnovna-tipa-korelacijskih-odnosa">Četiri osnovna tipa korelacijskih odnosa:</h3>
<ol>
<li>
<p><strong>Pozitivna korelacija</strong> (<code>+</code>)</p>
<ul>
<li><strong>Karakteristike</strong>:
<ul>
<li>Mala vrijednost varijable X ↔ mala vrijednost varijable Y</li>
<li>Velika vrijednost varijable X ↔ velika vrijednost varijable Y</li>
</ul>
</li>
<li><strong>Grafički prikaz</strong>: Točke se koncentriraju oko uzlazne linije</li>
</ul>
</li>
<li>
<p><strong>Negativna korelacija</strong> (<code>-</code>)</p>
<ul>
<li><strong>Karakteristike</strong>:
<ul>
<li>Mala vrijednost varijable X ↔ velika vrijednost varijable Y</li>
<li>Velika vrijednost varijable X ↔ mala vrijednost varijable Y</li>
</ul>
</li>
<li><strong>Grafički prikaz</strong>: Točke se koncentriraju oko silazne linije</li>
</ul>
</li>
<li>
<p><strong>Nemonotona korelacija</strong> (<code>ciklička</code>)</p>
<ul>
<li><strong>Karakteristike</strong>:
<ul>
<li>Odnos se mijenja po intervalima</li>
<li>U nekim dijelovima može biti pozitivan, u drugima negativan</li>
<li>Ako se smjer mijenja više puta → ciklička korelacija</li>
</ul>
</li>
<li><strong>Grafički prikaz</strong>: Točke slijede valoviti obrazac (npr. sinusoida)</li>
</ul>
</li>
<li>
<p><strong>Nul-korelacija</strong> (<code>0</code>)</p>
<ul>
<li><strong>Karakteristike</strong>:
<ul>
<li>Nema vidljive veze između varijabli</li>
<li>Vrijednosti jedne varijable ne pružaju informaciju o vrijednostima druge</li>
</ul>
</li>
<li><strong>Grafički prikaz</strong>: Točke potpuno nasumično raspršene</li>
</ul>
</li>
</ol>
<div class="page"></div>
<table>
<thead>
<tr>
<th>Tip korelacije</th>
<th>Smjer</th>
<th>Snaga</th>
<th>Primjer vizualizacije</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pozitivna</td>
<td>↗</td>
<td>Jaka do umjerena</td>
<td>Točke blisko uz uzlaznu liniju</td>
</tr>
<tr>
<td>Negativna</td>
<td>↘</td>
<td>Jaka do umjerena</td>
<td>Točke blisko uz silaznu liniju</td>
</tr>
<tr>
<td>Nemonotona</td>
<td>Promjenjiv</td>
<td>Varira</td>
<td>Valoviti/periodični obrazac</td>
</tr>
<tr>
<td>Nul-korelacija</td>
<td>-</td>
<td>0</td>
<td>Kaotično raspršene točke</td>
</tr>
</tbody>
</table>
<div style="width: 100%; display: flex; justify-content: center;">
    <img src="images/korelacijski_odnosi.png"/>
</div>
<h3 id="koeficijenti-korelacije">Koeficijenti korelacije</h3>
<p><strong>Koeficijenti korelacije</strong> mjere povezanost između varijabli na standardiziranoj skali neovisnoj o mjernim jedinicama. Dva najčešća koeficijenta su:</p>
<ol>
<li><strong>Pearsonov (r)</strong> - mjeri <strong>linearnu</strong> povezanost (-1 do +1), optimalan za normalno distribuirane podatke</li>
<li><strong>Spearmanov (ρ)</strong> - mjeri <strong>monotonu</strong> povezanost kroz rangove, robusniji na nelinearnosti i outlier-e</li>
</ol>
<p>Pearson je osjetljiv na linearne odnose, dok Spearman hvata širi spektar monotonih veza (uključujući nelinearne). Oba koeficijenta eliminiraju utjecaj mjernih jedinica, omogućavajući usporedbu različitih varijabli.</p>
<h4 id="pearsonov-koeficijent-korelacije">Pearsonov koeficijent korelacije</h4>
<p>Pearsonov koeficijent (r) mjeri <strong>linearnu povezanost</strong> između dvije numeričke varijable s normalnom distribucijom. Vrijednost Pearsonovog koeficijenta korelacije kreće se od <code>+1</code> (<em>savršena pozitivna korelacija</em>) do <code>–1</code> (<em>savršena negativna korelacija</em>). <strong>Predznak</strong> koeficijenta nas upućuje na <strong>smjer korelacije</strong> – je li pozitivna ili negativna, ali nas ne upućuje na snagu korelacije. Pearsonov koeficijent korelacije bazira se na usporedbi stvarnog utjecaja promatranih varijabli jedne na drugu u odnosu na maksimalni mogući utjecaj dviju varijabli.
Vrijednosti:</p>
<ul>
<li><strong>+1</strong>: savršena pozitivna korelacija</li>
<li><strong>-1</strong>: savršena negativna korelacija</li>
<li><strong>0</strong>: nema linearne veze</li>
</ul>
<blockquote>
<p>Osjetljiv je na outlier-e te zahtijeva linearnost i normalnu distribuciju</p>
</blockquote>
<p><code>cor()</code> funkcija uvijek koristi <strong>Pearsonov koeficijent</strong> tako da se ne navodi kao argument:</p>
<pre class="hljs"><code><div>cor(x, y)
</div></code></pre>
<p><em>Vrijednosti Pearsonovog koeficijenta korelacije:</em></p>
<table>
<thead>
<tr>
<th>Vrijednost (r)</th>
<th>Jakost veze</th>
<th>Smjer veze</th>
</tr>
</thead>
<tbody>
<tr>
<td>-1.0</td>
<td>Funkcionalna veza</td>
<td>Negativan</td>
</tr>
<tr>
<td>-1.0 &lt; r &lt; -0.8</td>
<td>Jaka veza</td>
<td>Negativan</td>
</tr>
<tr>
<td>-0.8 ≤ r &lt; -0.5</td>
<td>Umjerena veza</td>
<td>Negativan</td>
</tr>
<tr>
<td>-0.5 ≤ r &lt; 0</td>
<td>Slaba veza</td>
<td>Negativan</td>
</tr>
<tr>
<td>0</td>
<td>Nema linearne veze</td>
<td>-</td>
</tr>
<tr>
<td>0 &lt; r ≤ 0.5</td>
<td>Slaba veza</td>
<td>Pozitivan</td>
</tr>
<tr>
<td>0.5 &lt; r ≤ 0.8</td>
<td>Umjerena veza</td>
<td>Pozitivan</td>
</tr>
<tr>
<td>0.8 &lt; r &lt; 1.0</td>
<td>Jaka veza</td>
<td>Pozitivan</td>
</tr>
<tr>
<td>1.0</td>
<td>Funkcionalna veza</td>
<td>Pozitivan</td>
</tr>
</tbody>
</table>
<h4 id="spearmanov-koeficijent-korelacije">Spearmanov koeficijent korelacije</h4>
<p>Spearmanov koeficijent (ρ) mjeri <strong>monotonu povezanost</strong> (linearne i nelinearne) kroz rangove vrijednosti. Koristi se za mjerenje povezanosti između varijabli u slučajevima kada nije moguće primijeniti Pearsonov koeficijent korelacije. Bazira se na tome da se izmjeri dosljednost povezanosti između poredanih varijabli, a oblik povezanosti (npr. linearni oblik koji je preduvjet za korištenje Pearsonovog koeficijenta) nije bitan.</p>
<blockquote>
<p>Robusniji na odstupanja od normalnosti te detektira širi spektar veza</p>
</blockquote>
<p>Da bi koristili <strong>Spearmanov koeficijent</strong> u <code>cor()</code> funkciji trebamo ga navesti kao metodu:</p>
<pre class="hljs"><code><div>cor(x, y, method = <span class="hljs-string">"spearman"</span>)
</div></code></pre>
<div style="width: 100%; display: flex; justify-content: center;">
    <img src="images/koeficijenti_korelacije.png"/>
</div>
<h3 id="matrica-korelacije">Matrica korelacije</h3>
<p>Matrica korelacije je tabularni prikaz koeficijenata korelacije između svih parova varijabli u skupu podataka. Omogućuje:</p>
<ul>
<li>Simultani pregled međusobnih odnosa više varijabli</li>
<li>Identifikaciju najjačih povezanosti</li>
<li>Preliminarnu analizu prije složenijih statističkih modela</li>
</ul>
<p><strong>Dijagonala</strong>: Uvijek sadrži vrijednosti 1 (savršena korelacija varijable same sa sobom)
<strong>Simetričnost</strong>: <code>cor(X,Y) = cor(Y,X)</code></p>
<p><em>Izrada korelacijske matrice u R-u s pomoću <code>corrplot()</code> ili <code>corrgram()</code> funkcija:</em></p>
<pre class="hljs"><code><div><span class="hljs-comment">#install.packages("corrplot")</span>
<span class="hljs-comment">#install.packages("corrgram)</span>
<span class="hljs-keyword">library</span>(corrplot)
<span class="hljs-keyword">library</span>(corrgram)

par(mfrow = c(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))
cor_matrix &lt;- cor(quakes)

corrplot(cor_matrix) <span class="hljs-comment"># method = "circle" - ako nije postavljeno</span>
corrplot(cor_matrix, method = <span class="hljs-string">"color"</span>)
corrplot(cor_matrix, method = <span class="hljs-string">"number"</span>)
corrplot(cor_matrix, method = <span class="hljs-string">"square"</span>)
corrplot(cor_matrix, method = <span class="hljs-string">"ellipse"</span>)
corrplot(cor_matrix, method = <span class="hljs-string">"pie"</span>)
</div></code></pre>
<div style="width: 100%; display: flex; justify-content: center;">
    <img src="images/korelacijska_matrica.png"/>
</div>
<br/>
<p><em>Izrada korelacijske matrice u R-u s pomoću <code>pairs()</code> funkcije:</em></p>
<pre class="hljs"><code><div>pairs(quakes)
</div></code></pre>
<div style="width: 100%; display: flex; justify-content: center;">
    <img src="images/korelacijska_matrica_pairs.png"/>
</div>
<div class="page"></div>
<h3 id="outlieri-u-korelacijskoj-analizi">Outlieri u korelacijskoj analizi</h3>
<p><strong>Outlieri</strong> su <strong>ekstremne vrijednosti</strong> koje značajno odstupaju od većine podataka i mogu dramatično utjecati na rezultate korelacijske analize. Budući da <em>Pearsonov koeficijent</em> koristi metode najmanjih kvadrata, samo nekoliko ekstremnih vrijednosti može potpuno iskriviti pravi odnos između varijabli. Vizualna detekcija s pomoću <strong>boxplot</strong>-a jedan je način za vizualnu identifikaciju outliera.</p>
<p>U praksi se koriste <strong>kvantitativne metode</strong> za identifikaciju outliera, poput:</p>
<ul>
<li>Uklanjanja vrijednosti izvan <code>±2</code> standardne devijacije</li>
<li>IQR metode (vrijednosti izvan <code>1.5×IQR</code> od kvartila)</li>
</ul>
<blockquote>
<p>Ključni izazov je razlikovati prave outliere od rijetkih ali autentičnih vrijednosti. U velikim uzorcima s malim brojem outliera, njihovo uklanjanje je opravdano. Međutim, u malim uzorcima ili kada outlieri predstavljaju važne biološke/prirodne pojave, njihovo uklanjanje može dovesti do gubitka ključnih informacija.</p>
</blockquote>
<div style="width: 100%; display: flex; justify-content: center;">
    <img src="images/korelacija_outlieri.png"/>
</div>
<h3 id="kovarijanca">Kovarijanca</h3>
<p><strong>Kovarijanca</strong> mjeri zajedničku varijabilnost dviju numeričkih varijabli, pokazujući kako se jedna mijenja u odnosu na drugu. Za razliku od korelacije koja je standardizirana, kovarijanca ovisi o mjernim jedinicama varijabli što otežava izravnu usporedbu između različitih studija. Računa se kao prosječni umnožak odstupanja svake varijable od svoje srednje vrijednosti.</p>
<p><strong>Pozitivna vrijednost</strong> ukazuje da se veće vrijednosti jedne varijable obično javljaju uz veće vrijednosti druge, dok <strong>negativna pokazuje</strong> suprotan odnos. <strong>Nulta vrijednost</strong> sugerira odsutnost linearne povezanosti.</p>
<ul>
<li><strong>Pozitivna kovarijanca</strong>: Veće vrijednosti <em>X</em> tendiraju uz veće vrijednosti <em>Y</em></li>
<li><strong>Negativna kovarijanca</strong>: Veće vrijednosti <em>X</em> tendiraju uz manje vrijednosti <em>Y</em></li>
<li><strong>Nula</strong>: Nema linearne povezanosti</li>
</ul>
<p><em>U R-u kovarijanca se računa s pomoću sljedeće funkcije:</em></p>
<pre class="hljs"><code><div>cov(x, y)
</div></code></pre>
<p>Korelacija je standardizirana verzija kovarijance:<br>
$$
\rho = \frac{\text{cov}(X,Y)}{\sigma_X \sigma_Y}
$$
Dok kovarijanca može biti bilo koji realan broj, korelacija je uvijek između -1 i 1.</p>
<h3 id="multikolinearnost">Multikolinearnost</h3>
<p><strong>Multikolinearnost</strong> nastaje kada su dva ili više prediktora u regresijskom modelu visoko međusobno korelirana, što otežava pouzdano procjenjivanje njihovih pojedinačnih utjecaja.</p>
<p><strong>Zašto je problematična:</strong></p>
<ul>
<li>Koeficijenti postaju nestabilni i osjetljivi na male promjene u podacima</li>
<li>Standardne pogreške rastu → p-vrijednosti mogu postati nenamjerno visoke</li>
<li>Teže je interpretirati doprinos pojedinih varijabli</li>
</ul>
<p><strong>Kako otkriti:</strong></p>
<ul>
<li><strong>Korelacijska matrica</strong>: Pogledati visoke korelacije između prediktora (npr. &gt; 0.8)</li>
<li><strong>VIF (Variance Inflation Factor)</strong>: Ako je VIF &gt; 5 (ili 10), postoji jaka multikolinearnost</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">library</span>(car)
vif(model)
</div></code></pre>
<p><strong>Rješenja:</strong></p>
<ul>
<li>Ukloniti jedan od koreliranih prediktora</li>
<li>Kombinirati varijable (npr. PCA)</li>
<li>Korištenje regularizacije (npr. Ridge, Lasso regresija)</li>
</ul>
<pre class="hljs"><code><div>sqrt(vif(model))&gt;<span class="hljs-number">2</span>
<span class="hljs-comment"># Ako je sve false nema problema multikolinearnosti</span>
</div></code></pre>
<div class="page"></div>
<h2 id="regresijska-analiza">Regresijska analiza</h2>
<p>Regresijska analiza omogućuje kvantificiranje veze između promatranih pojava kroz matematički model.</p>
<ol>
<li><strong>Objašnjenje odnosa</strong>: Utvrđivanje kako nezavisne varijable utječu na zavisnu varijablu</li>
<li><strong>Predviđanje vrijednosti</strong>: Procjena budućih vrijednosti zavisne varijable na temelju poznatih vrijednosti nezavisnih varijabli</li>
</ol>
<p><em>Tipovi regresije:</em></p>
<table>
<thead>
<tr>
<th>Tip</th>
<th>Formula</th>
<th>Primjena</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Linearna</strong></td>
<td>$$Y = β_0 + β_1X + ε$$</td>
<td>Kontinuirani odnosi</td>
</tr>
<tr>
<td><strong>Logistička</strong></td>
<td>$$ln(\frac{p}{1-p}) = βX$$</td>
<td>Binarni ishodi</td>
</tr>
<tr>
<td><strong>Polinomska</strong></td>
<td>$$Y = β_0 + β_1X + β_2X^2$$</td>
<td>Nelinearni trendovi</td>
</tr>
</tbody>
</table>
<h3 id="linearna-regresija">Linearna regresija</h3>
<p><em>Primjer</em>:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Linearna regresija</span>
model &lt;- lm(mpg ~ wt + hp, data = mtcars)
summary(model)
</div></code></pre>
<p><em>Output:</em></p>
<pre class="hljs"><code><div>Call:
lm(formula = mpg ~ wt + hp, data = mtcars)

Residuals:
   Min     1Q Median     3Q    Max 
-<span class="hljs-number">3.941</span> -<span class="hljs-number">1.600</span> -<span class="hljs-number">0.182</span>  <span class="hljs-number">1.050</span>  <span class="hljs-number">5.854</span> 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) <span class="hljs-number">37.22727</span>    <span class="hljs-number">1.59879</span>  <span class="hljs-number">23.285</span>  &lt; <span class="hljs-number">2e-16</span> ***
wt          -<span class="hljs-number">3.87783</span>    <span class="hljs-number">0.63273</span>  -<span class="hljs-number">6.129</span> <span class="hljs-number">1.12e-06</span> ***
hp          -<span class="hljs-number">0.03177</span>    <span class="hljs-number">0.00903</span>  -<span class="hljs-number">3.519</span>  <span class="hljs-number">0.00145</span> ** 
---
Signif. codes:  <span class="hljs-number">0</span> ‘***’ <span class="hljs-number">0.001</span> ‘**’ <span class="hljs-number">0.01</span> ‘*’ <span class="hljs-number">0.05</span> ‘.’ <span class="hljs-number">0.1</span> ‘ ’ <span class="hljs-number">1</span>

Residual standard error: <span class="hljs-number">2.593</span> on <span class="hljs-number">29</span> degrees of freedom
Multiple R-squared:  <span class="hljs-number">0.8268</span>,	Adjusted R-squared:  <span class="hljs-number">0.8148</span> 
<span class="hljs-literal">F</span>-statistic: <span class="hljs-number">69.21</span> on <span class="hljs-number">2</span> and <span class="hljs-number">29</span> DF,  p-value: <span class="hljs-number">9.109e-12</span>
</div></code></pre>
<p>Ova naredba u R-u:</p>
<pre class="hljs"><code><div>lm(formula = mpg ~ wt + hp, data = mtcars)
</div></code></pre>
<p>pokreće <strong>linearnu regresiju</strong> gdje je cilj predvidjeti <strong>potrošnju goriva u miljama po galonu (mpg)</strong> na temelju dvaju prediktora:</p>
<ul>
<li><strong>wt</strong>: težina automobila (u tisućama funti),</li>
<li><strong>hp</strong>: konjske snage automobila.</li>
</ul>
<p>Rezultat koji dobivamo sastoji se od nekoliko dijelova:</p>
<p><strong>1. Reziduali (Residuals):</strong></p>
<pre class="hljs"><code><div>   Min     1Q Median     3Q    Max 
-<span class="hljs-number">3.941</span> -<span class="hljs-number">1.600</span> -<span class="hljs-number">0.182</span>  <span class="hljs-number">1.050</span>  <span class="hljs-number">5.854</span> 
</div></code></pre>
<p>Reziduali su razlike između stvarnih vrijednosti (<code>mpg</code>) i onih predviđenih modelom:</p>
<ul>
<li><strong>Min</strong>: Najveća negativna pogreška</li>
<li><strong>1Q</strong>: Donji kvartil (25% podataka ima manji rezidual)</li>
<li><strong>Median</strong>: Srednja vrijednost reziduala (idealno blizu 0)</li>
<li><strong>3Q</strong>: Gornji kvartil (25% podataka ima veći rezidual)</li>
<li><strong>Max</strong>: Najveća pozitivna pogreška</li>
</ul>
<p><strong>2. Koeficijenti regresije (Coefficients):</strong></p>
<table>
<thead>
<tr>
<th>Predictor</th>
<th>Estimate</th>
<th>Std. Error</th>
<th>t value</th>
<th>Pr(|&gt;t|)</th>
<th>Signif. code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Intercept</td>
<td>37.227</td>
<td>1.599</td>
<td>23.285</td>
<td>&lt; 2e-16</td>
<td>***</td>
</tr>
<tr>
<td>wt</td>
<td>-3.878</td>
<td>0.633</td>
<td>-6.129</td>
<td>1.12e-06</td>
<td>***</td>
</tr>
<tr>
<td>hp</td>
<td>-0.03177</td>
<td>0.00903</td>
<td>-3.519</td>
<td>0.00145</td>
<td>**</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Intercept (presjek)</strong>: Kada su težina i snaga 0, očekivana vrijednost <code>mpg</code> je 37.23 (tehnički, nije realna situacija, ali služi kao referentna točka).</li>
<li><strong>wt</strong>: Svako povećanje težine za 1 (tj. 1000 funti) smanjuje <code>mpg</code> za 3.88 jedinica, pod uvjetom da su ostali prediktori konstantni.</li>
<li><strong>hp</strong>: Svako povećanje snage za 1 konjsku snagu smanjuje <code>mpg</code> za oko 0.032 jedinice.</li>
</ul>
<p><strong>Std. Error (standardna pogreška)</strong>: Predstavlja procjenu nesigurnosti oko vrijednosti koeficijenta. Manja vrijednost znači veću pouzdanost.</p>
<ul>
<li>standardna pogreška za <code>wt</code> iznosi 0.633, što ukazuje na relativno stabilnu i pouzdanu procjenu njegovog utjecaja na <code>mpg</code></li>
</ul>
<p><strong>t value (t-vrijednost)</strong>: Pokazuje koliko je procijenjeni koeficijent udaljen od nule u jedinicama svoje standardne pogreške. Što je t-vrijednost veća (pozitivno ili negativno), veća je vjerojatnost da koeficijent <strong>nije slučajan</strong>, već ima stvarni utjecaj na zavisnu varijablu (<code>mpg</code>).</p>
<ul>
<li>t-vrijednost <code>-6.129</code> za <code>wt</code> znači da je koeficijent vrlo značajan</li>
</ul>
<p><strong>Pr(&gt;|t|)</strong> prikazuje <strong>p-vrijednosti</strong> – sve su značajno manje od 0.05 → svi koeficijenti su statistički značajni.</p>
<pre class="hljs"><code><div>Signif. codes:  <span class="hljs-number">0</span> ‘***’ <span class="hljs-number">0.001</span> ‘**’ <span class="hljs-number">0.01</span> ‘*’ <span class="hljs-number">0.05</span> ‘.’ <span class="hljs-number">0.1</span> ‘ ’ <span class="hljs-number">1</span>
</div></code></pre>
<p>Oznake govore koliko je prediktor statistički značajan:</p>
<ul>
<li><code>***</code> → vrlo značajan (p &lt; 0.001)</li>
<li><code>**</code> → značajan (p &lt; 0.01)</li>
<li><code>*</code> → umjereno značajan (p &lt; 0.05)</li>
<li><code>.</code> → slabo značajan (p &lt; 0.1)</li>
<li><code> </code> (prazno) → nije značajan (p ≥ 0.1)</li>
</ul>
<p><strong>3. Ostale statističke vrijednosti modela:</strong></p>
<pre class="hljs"><code><div>Residual standard error: <span class="hljs-number">2.593</span> on <span class="hljs-number">29</span> degrees of freedom
Multiple R-squared:  <span class="hljs-number">0.8268</span>
Adjusted R-squared:  <span class="hljs-number">0.8148</span>
<span class="hljs-literal">F</span>-statistic: <span class="hljs-number">69.21</span> on <span class="hljs-number">2</span> and <span class="hljs-number">29</span> DF,  p-value: <span class="hljs-number">9.109e-12</span>
</div></code></pre>
<ul>
<li><strong>Residual standard error</strong>: Prosječna udaljenost stvarnih vrijednosti <code>mpg</code> od vrijednosti predviđenih modelom. Niža vrijednost znači da su predikcije bliže stvarnim podacima (ovdje: 2.593).</li>
<li><strong>Multiple R-squared</strong>: Postotak varijance u <code>mpg</code> koji model objašnjava s pomoću prediktora <code>wt</code> i <code>hp</code>. Vrijednost 0.8268 znači da model objašnjava 82.68% ukupne varijacije.</li>
<li><strong>Adjusted R-squared</strong>: Kao R-squared, ali uzima u obzir broj prediktora. Koristi se kako bi se izbjegla umjetna inflacija R-squared vrijednosti kod dodavanja irelevantnih varijabli. Ovdje: 81.48%.</li>
<li><strong>F-statistic</strong>: Testira cijeli model – provjerava je li barem jedan prediktor značajan. Visoka vrijednost (69.21) i vrlo mala p-vrijednost (9.109e-12) ukazuju da je model statistički značajno bolji od modela bez prediktora.</li>
</ul>
<h3 id="logisti%C4%8Dka-regresija">Logistička regresija</h3>
<p>Logistička regresija se koristi za predviđanje binarnih ishoda, tj. kada zavisna varijabla ima dvije kategorije (npr. da/ne, uspješno/neuspješno). U R-u, za izvođenje logističke regresije koristi se funkcija <code>glm()</code>, a rezultati se analiziraju kroz koeficijente, standardne pogreške, p-vrijednosti i druge metrike.</p>
<p>Logistička regresija se koristi za predviđanje binarne varijable — u ovom slučaju: ima li osoba prihod veći od <em>50k USD</em> ili <em>ne</em>. Zavisna varijabla je <code>income</code>, s vrijednostima &lt;<code>=50K</code> i <code>&gt;50K</code>.</p>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div>adult &lt;- read.csv(<span class="hljs-string">"adult.data"</span>, header = <span class="hljs-literal">FALSE</span>, strip.white = <span class="hljs-literal">TRUE</span>)
colnames(adult) &lt;- c(<span class="hljs-string">"age"</span>, <span class="hljs-string">"workclass"</span>, <span class="hljs-string">"fnlwgt"</span>, <span class="hljs-string">"education"</span>, <span class="hljs-string">"education.num"</span>,
                     <span class="hljs-string">"marital.status"</span>, <span class="hljs-string">"occupation"</span>, <span class="hljs-string">"relationship"</span>, <span class="hljs-string">"race"</span>, <span class="hljs-string">"sex"</span>,
                     <span class="hljs-string">"capital.gain"</span>, <span class="hljs-string">"capital.loss"</span>, <span class="hljs-string">"hours.per.week"</span>, <span class="hljs-string">"native.country"</span>, <span class="hljs-string">"income"</span>)

adult &lt;- na.omit(adult)

adult$income_bin &lt;- ifelse(adult$income == <span class="hljs-string">"&gt;50K"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)

model &lt;- glm(income_bin ~ age + education.num, data = adult, family = binomial)
summary(model)
</div></code></pre>
<p><em>Output:</em></p>
<pre class="hljs"><code><div>Call:
glm(formula = income_bin ~ age + education.num, family = binomial, 
    data = adult)

Coefficients:
               Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)   -<span class="hljs-number">6.748100</span>   <span class="hljs-number">0.088629</span>  -<span class="hljs-number">76.14</span>   &lt;<span class="hljs-number">2e-16</span> ***
age            <span class="hljs-number">0.043483</span>   <span class="hljs-number">0.001091</span>   <span class="hljs-number">39.87</span>   &lt;<span class="hljs-number">2e-16</span> ***
education.num  <span class="hljs-number">0.362109</span>   <span class="hljs-number">0.006366</span>   <span class="hljs-number">56.89</span>   &lt;<span class="hljs-number">2e-16</span> ***
---
Signif. codes:  <span class="hljs-number">0</span> ‘***’ <span class="hljs-number">0.001</span> ‘**’ <span class="hljs-number">0.01</span> ‘*’ <span class="hljs-number">0.05</span> ‘.’ <span class="hljs-number">0.1</span> ‘ ’ <span class="hljs-number">1</span>

(Dispersion parameter <span class="hljs-keyword">for</span> binomial family taken to be <span class="hljs-number">1</span>)

    Null deviance: <span class="hljs-number">35948</span>  on <span class="hljs-number">32560</span>  degrees of freedom
Residual deviance: <span class="hljs-number">30231</span>  on <span class="hljs-number">32558</span>  degrees of freedom
AIC: <span class="hljs-number">30237</span>

Number of Fisher Scoring iterations: <span class="hljs-number">5</span>
</div></code></pre>
<table>
<thead>
<tr>
<th>Predictor</th>
<th>Estimate</th>
<th>Std. Error</th>
<th>z value</th>
<th>Pr(|&gt;z|)</th>
<th>Signif. code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Intercept</td>
<td>-6.7481</td>
<td>0.0886</td>
<td>-76.14</td>
<td>&lt; 2e-16</td>
<td>***</td>
</tr>
<tr>
<td>age</td>
<td>0.0435</td>
<td>0.0011</td>
<td>39.87</td>
<td>&lt; 2e-16</td>
<td>***</td>
</tr>
<tr>
<td>education.num</td>
<td>0.3621</td>
<td>0.0064</td>
<td>56.89</td>
<td>&lt; 2e-16</td>
<td>***</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><strong>(Intercept)</strong>: Logaritamski omjer vjerojatnosti da osoba zarađuje &gt;50k USD kada su <code>age</code> i <code>education.num</code> jednaki 0. Iako ta situacija nije realna (osoba stara 0 godina s obrazovanjem 0), presjek služi kao referentna točka u modelu.</p>
</li>
<li>
<p><strong>age</strong>: Koeficijent <code>0.0435</code> znači da svaka dodatna godina starosti povećava log-odds za zaradu veću od 50k za 0.0435. Budući da je pozitivan, stariji ljudi imaju veću vjerojatnost da imaju veće prihode — uz pretpostavku da je <code>education.num</code> konstantan.</p>
</li>
<li>
<p><strong>education.num</strong>: Koeficijent <code>0.3621</code> znači da svaka dodatna razina obrazovanja (npr. prelazak s 10 na 11 godina formalnog obrazovanja) povećava log-odds za visoku zaradu za 0.3621. Dakle, veće obrazovanje snažno utječe na vjerojatnost veće plaće.</p>
</li>
</ul>
<h3 id="izra%C4%8Dunavanje-vjerojatnosti">Izračunavanje vjerojatnosti</h3>
<p>Za predviđanje vjerojatnosti određenog ishoda (npr. <code>outcome = 1</code>), koristimo funkciju <code>predict()</code>:</p>
<pre class="hljs"><code><div>prob &lt;- predict(model, type = <span class="hljs-string">"response"</span>)
</div></code></pre>
<p>Ova funkcija vraća vjerojatnosti (između 0 i 1) za svaki primjerak u datasetu. Ako želimo pretvoriti te vjerojatnosti u kategorije (npr. 1 ako je vjerojatnost veća od 0.5, inače 0), možemo to napraviti ovako:</p>
<pre class="hljs"><code><div>pred_class &lt;- ifelse(prob &gt; <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)
</div></code></pre>
<p>Za procjenu kvalitete modela možemo koristiti nekoliko metrika, uključujući <strong>točnost (accuracy)</strong>, <strong>preciznost (precision)</strong>, <strong>osjetljivost (recall)</strong> i <strong>F1-score</strong>. Također, često se koristi <strong>confusion matrix</strong> za vizualizaciju performansi modela:</p>
<pre class="hljs"><code><div>table(Predicted = pred_class, Actual = adult$income_bin)
</div></code></pre>
<p>Dobivena matrica:</p>
<table>
<thead>
<tr>
<th></th>
<th>Actual 0 (<code>&lt;=50K</code>)</th>
<th>Actual 1 (<code>&gt;50K</code>)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Predicted 0</td>
<td>23,286 (TN)</td>
<td>5,656 (FN)</td>
</tr>
<tr>
<td>Predicted 1</td>
<td>1,434 (FP)</td>
<td>2,185 (TP)</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><strong>TN (True Negative)</strong> = 23,286
→ Model je točno predvidio da osoba <em>nema visoki prihod</em> (<code>&lt;=50K</code>)</p>
</li>
<li>
<p><strong>TP (True Positive)</strong> = 2,185
→ Model je točno predvidio da osoba <em>ima visoki prihod</em> (<code>&gt;50K</code>)</p>
</li>
<li>
<p><strong>FN (False Negative)</strong> = 5,656
→ Model je krivo predvidio da osoba <em>nema visoki prihod</em>, iako zapravo ima (<code>&gt;50K</code>)</p>
</li>
<li>
<p><strong>FP (False Positive)</strong> = 1,434
→ Model je krivo predvidio da osoba <em>ima visoki prihod</em>, iako zapravo nema (<code>&lt;=50K</code>)</p>
</li>
</ul>
<div class="page"></div>
<p><em>Izračun metrika:</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Vrijednosti iz confusion matrice</span>
TP &lt;- <span class="hljs-number">2185</span>
TN &lt;- <span class="hljs-number">23286</span>
FP &lt;- <span class="hljs-number">1434</span>
FN &lt;- <span class="hljs-number">5656</span>

<span class="hljs-comment"># Ukupno primjera</span>
total &lt;- TP + TN + FP + FN  <span class="hljs-comment"># = 32361</span>

<span class="hljs-comment"># Izračun metrika</span>
accuracy    &lt;- (TP + TN) / total        <span class="hljs-comment"># Točnost</span>
precision   &lt;- TP / (TP + FP)           <span class="hljs-comment"># Preciznost</span>
recall      &lt;- TP / (TP + FN)           <span class="hljs-comment"># Osjetljivost (Recall)</span>
specificity &lt;- TN / (TN + FP)           <span class="hljs-comment"># Specifičnost</span>
f1_score    &lt;- <span class="hljs-number">2</span> * (precision * recall) / (precision + recall)  <span class="hljs-comment"># F1-score</span>
</div></code></pre>
<p><strong>Rezultati:</strong></p>
<table>
<thead>
<tr>
<th>Metrika</th>
<th>Vrijednost</th>
<th>Objašnjenje</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Točnost</strong></td>
<td>0.7822</td>
<td>78.22% ispravnih predikcija</td>
</tr>
<tr>
<td><strong>Preciznost</strong></td>
<td>0.6037</td>
<td>Od svih za koje je model rekao <code>&gt;50K</code>, točno je 60.37%</td>
</tr>
<tr>
<td><strong>Osjetljivost</strong></td>
<td>0.2786</td>
<td>Od svih koji stvarno imaju <code>&gt;50K</code>, uhvaćeno je 27.86%</td>
</tr>
<tr>
<td><strong>Specifičnost</strong></td>
<td>0.9419</td>
<td>Od svih koji stvarno imaju <code>&lt;=50K</code>, točno klasificirano 94.19%</td>
</tr>
<tr>
<td><strong>F1-score</strong></td>
<td>0.3813</td>
<td>Harmonična sredina preciznosti i osjetljivosti (za <code>&gt;50K</code>)</td>
</tr>
</tbody>
</table>
<h2 id="vremenski-nizovi">Vremenski nizovi</h2>
<p>Vremenski nizovi predstavljaju <strong>nizove podataka</strong> prikupljenih u <strong>redovitim vremenskim intervalima</strong>. Analiza vremenskih nizova omogućava prepoznavanje obrazaca, trendova i sezonalnosti te predviđanje budućih vrijednosti.</p>
<blockquote>
<p>Vremenski niz je skup opažanja indeksiranih vremenskih trenutaka, obično <strong>ekvidistantnim</strong> (<em>jednako razmaknutim</em>).</p>
</blockquote>
<p>Dvije glavne karakteristike vremenskih nizova su <strong>vremenski period</strong> i <strong>frekvencija</strong>. Ove karakteristike pružaju osnovne informacije o strukturi i prirodi podataka te omogućavajući da bolje razumijemo dinamiku promjena koje se odvijaju kroz vrijeme.</p>
<ul>
<li><strong>Vremenski period</strong> - nema ograničenja u pogledu ukupnog trajanja vremenskog niza. To može biti minuta, dan, mjesec ili čak stoljeće. Sve što je potrebno su <em>početna</em> i <em>završna</em> točka.
<ul>
<li>npr. ako su podaci prikupljeni jednom dnevno od 1. siječnja 2000. do 31. prosinca 2009., razmak od jednog dana predstavlja <strong>vremenski trenutak</strong>, dok je skup vremenskih trenutaka cijelo desetljeće</li>
</ul>
</li>
<li><strong>Frekvencija</strong> - označava koliko često se bilježe vrijednosti skupa podataka. Da bi analiza vremenskog niza bila smislena, svi vremenski trenutci moraju biti jednaki i jasno definirani. To rezultira <strong>ekvidistantnim</strong> rasporedom vremenskih trenutaka, što pokazuje pravilnost u bilježenju podataka.
<ul>
<li>npr. frekvencija se može kretati od nekoliko milisekundi do nekoliko desetljeća, ali najčešće se pojavljuju dnevni, mjesečni, kvartalni i godišnji podaci</li>
</ul>
</li>
</ul>
<p><strong>Ključne komponente</strong>:</p>
<ul>
<li><strong>Trend</strong> - dugoročni smjer promjena (rast, pad, stabilnost)</li>
<li><strong>Sezonalnost</strong> - pravilne fluktuacije povezane s periodima (dnevno, mjesečno, godišnje)</li>
<li><strong>Cikličke varijacije</strong> - dugotrajne fluktuacije bez fiksnog perioda</li>
<li><strong>Nasumične varijacije</strong> - nepredvidivi šum u podacima</li>
</ul>
<p><em>Paketi za rad s vremenskim nizovima:</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># install.packages(c("ggplot2", "forecast", "tseries"))</span>
<span class="hljs-keyword">library</span>(ggplot2)    <span class="hljs-comment"># Za naprednu vizualizaciju grafova</span>
<span class="hljs-keyword">library</span>(forecast)   <span class="hljs-comment"># Alati za analizu i predikciju vremenskih nizova (ARIMA, ETS, STL, itd.)</span>
<span class="hljs-keyword">library</span>(<span class="hljs-string">"tseries"</span>)  <span class="hljs-comment"># Statistički testovi i alati za vremenske nizove (ADF test, KPSS test i dr.)</span>
</div></code></pre>
<p>U R-u se vremenski nizovi prikazuju s pomoću funkcije <code>ts()</code> (<em>time series</em>):</p>
<pre class="hljs"><code><div>podaci &lt;- c(<span class="hljs-number">23</span>,<span class="hljs-number">45</span>,<span class="hljs-number">67</span>,<span class="hljs-number">34</span>,<span class="hljs-number">56</span>,<span class="hljs-number">78</span>,<span class="hljs-number">89</span>,<span class="hljs-number">45</span>,<span class="hljs-number">67</span>,<span class="hljs-number">89</span>,<span class="hljs-number">43</span>,<span class="hljs-number">56</span>, 
            <span class="hljs-number">34</span>,<span class="hljs-number">67</span>,<span class="hljs-number">89</span>,<span class="hljs-number">54</span>,<span class="hljs-number">76</span>,<span class="hljs-number">88</span>,<span class="hljs-number">91</span>,<span class="hljs-number">52</span>,<span class="hljs-number">71</span>,<span class="hljs-number">85</span>,<span class="hljs-number">49</span>,<span class="hljs-number">63</span>)
vremenski_niz &lt;- ts(podaci, start = c(<span class="hljs-number">2020</span>, <span class="hljs-number">1</span>), frequency = <span class="hljs-number">12</span>)

<span class="hljs-comment"># čišćenje od nedostajućih vrijednosti i outliera</span>
vremenski_niz &lt;- tsclean(vremenski_niz)
</div></code></pre>
<p><img src="images/vremenski_niz.png" alt="alt text"></p>
<p>Gdje:</p>
<ul>
<li><code>start</code> - početni vremenski trenutak (godina, period)</li>
<li><code>frequency</code> - broj opažanja po vremenskoj jedinici (365 za dnevne podatke, 12 za mjesečne, 4 za kvartalne, 1 za godišnje)</li>
</ul>
<p>Vizualizacija s pomoću <code>plot()</code> funkcije:</p>
<pre class="hljs"><code><div>data(<span class="hljs-string">"AirPassengers"</span>) <span class="hljs-comment"># Monthly totals of international airline passengers, 1949 to 1960.</span>
vremenski_niz &lt;- AirPassengers
</div></code></pre>
<p><img src="images/AirPassengers.png" alt="alt text"></p>
<pre class="hljs"><code><div>plot(vremenski_niz, main = <span class="hljs-string">"Vremenski niz sa trend linijom"</span>)
abline(lm(vremenski_niz ~ time(vremenski_niz)), col = <span class="hljs-string">"red"</span>)
</div></code></pre>
<p><img src="images/putnici_plot.png" alt="alt text"></p>
<p>Vizualizacija s pomoću <code>ma()</code> (<em>moving average</em>) funkcije, za glađi prikaz podataka:</p>
<pre class="hljs"><code><div>par(mfrow=c(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>))
vremenski_niz_ma3 &lt;- ma(vremenski_niz, order = <span class="hljs-number">3</span>)
vremenski_niz_ma5 &lt;- ma(vremenski_niz, order = <span class="hljs-number">9</span>)
vremenski_niz_ma7 &lt;- ma(vremenski_niz, order = <span class="hljs-number">27</span>)
plot(vremenski_niz, main = <span class="hljs-string">"Bez pomičnog prosjeka"</span>)
plot(vremenski_niz_ma3, main = <span class="hljs-string">"Pomični prosjek (red 3)"</span>)
plot(vremenski_niz_ma5, main = <span class="hljs-string">"Pomični prosjek (red 9)"</span>)
plot(vremenski_niz_ma7, main = <span class="hljs-string">"Pomični prosjek (red 27)"</span>)
</div></code></pre>
<p><img src="images/tsplotma.png" alt="alt text"></p>
<h3 id="analiza-vremenskih-nizova">Analiza vremenskih nizova</h3>
<p><strong>Analiza vremenskih nizova</strong> je ključna u upravljanju, posebno za predviđanje ishoda kao što su prodaja, troškovi ili uspjeh projekata. Koristi povijesne podatke za predviđanje budućih rezultata i procjenu utjecaja upravljačkih odluka. Podaci se bilježe u redovitim vremenskim intervalima, što omogućuje praćenje promjena varijabli tijekom vremena. Vrijeme postaje ključna varijabla koja pokazuje trendove, sezonske utjecaje i obrasce ponašanja. Za pouzdanu analizu potrebno je dovoljno podataka kako bi se izbjegle pogreške uzrokovane iznimnim vrijednostima. Što je skup podataka veći, to su rezultati pouzdaniji. Analiza vremenskih nizova pomaže u donošenju informiranih odluka na temelju jasnih vremenskih ovisnosti.</p>
<h3 id="dekompozicija-vremenskog-niza">Dekompozicija vremenskog niza</h3>
<p>Dekompozicija vremenskog niza je ključna tehnika u analizi vremenskih serija koja omogućuje razdvajanje kompleksnog niza podataka na njegove osnovne komponente. Ova metoda pruža jasniji uvid u strukturu podataka i olakšava interpretaciju.</p>
<ol>
<li>
<p><strong>Originalni podaci (observed)</strong>: predstavljaju neobrađene podatke koji su izravno prikupljeni iz izvora. Ovi podaci sadrže sve informacije u svom izvornom obliku, bez ikakvih modifikacija ili transformacija.</p>
</li>
<li>
<p><strong>Trend komponenta (trend)</strong>: pokazuje osnovni pravac kretanja podataka. Može biti uzlazan, silazan ili stabilan. Na primjer, ako analiziramo prodaju nekog proizvoda, trend će vjerojatno pokazivati postupni rast kroz godine. Ova komponenta nam pomaže uočiti osnovni smjer razvoja bez sporednih utjecaja.</p>
</li>
<li>
<p><strong>Sezonska komponenta (seasonal)</strong>: otkriva ponavljajuće obrasce koji se javljaju u redovitim intervalima. To mogu biti dnevne, tjedne, mjesečne ili godišnje varijacije. Tipičan primjer je povećana prodaja božićnih ukrasa u prosincu ili veća potrošnja električne energije tijekom zimskih mjeseci. Ova komponenta je posebno važna za planiranje u poslovnim aktivnostima.</p>
</li>
<li>
<p><strong>Slučajna komponenta (random)</strong>: sadrži sve one promjene koje ne možemo objasniti trendom niti sezonalnosti. To su nepredvidive fluktuacije koje mogu biti posljedica iznenadnih događaja, mjernih pogrešaka ili drugih neplaniranih čimbenika. Iako često smetaju analizi, njihovo praćenje može biti korisno za otkrivanje neuobičajenih pojava.</p>
</li>
</ol>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div>dekompozicija &lt;- decompose(AirPassengers)

plot(dekompozicija)
</div></code></pre>
<p><img src="images/dekompozicija.png" alt="alt text"></p>
<h4 id="stl-metoda">STL metoda</h4>
<p><strong>STL</strong> (<em>Seasonal Decomposition of Time Series by Loess</em>) je naprednija metoda dekompozicije koja koristi lokalnu regresiju (<em>LOESS</em>) za razdvajanje komponenti.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Primjer STL dekompozicije</span>
stl_dekomp &lt;- stl(AirPassengers, s.window = <span class="hljs-string">"periodic"</span>)

<span class="hljs-comment"># Vizualizacija</span>
plot(stl_dekomp, main = <span class="hljs-string">"STL dekompozicija AirPassengers dataseta"</span>)

</div></code></pre>
<h3 id="aditivna-i-multiplikativna-dekompozicija-vremenskog-niza">Aditivna i multiplikativna dekompozicija vremenskog niza</h3>
<h4 id="1-aditivna-dekompozicija">1. <strong>Aditivna dekompozicija</strong></h4>
<p>Koristi se kada amplitude sezonskih fluktuacija ostaju konstantne kroz vrijeme.</p>
<p><strong>Model:</strong><br>
<code>Y(t) = Trend(t) + Sezonska(t) + Slučajna(t)</code></p>
<p><strong>Karakteristike:</strong></p>
<ul>
<li>Sezonske varijacije su konstantne magnitude</li>
<li>Trend linearni ili polinomijalni</li>
<li>Pogodna za nizove s konstantnom varijancom</li>
</ul>
<p><strong>Primjer u R:</strong></p>
<pre class="hljs"><code><div>decomp_add &lt;- decompose(AirPassengers, type = <span class="hljs-string">"additive"</span>)
plot(decomp_add)

stl_add &lt;- stl(AirPassengers, s.window = <span class="hljs-string">"periodic"</span>)
plot(stl_add, main = <span class="hljs-string">"STL Aditivna dekompozicija"</span>)
</div></code></pre>
<p><img src="images/add.png" alt="alt text"></p>
<p><img src="images/stl.png" alt="alt text"></p>
<h4 id="2-multiplikativna-dekompozicija">2. <strong>Multiplikativna dekompozicija</strong></h4>
<p>Koristi se kada sezonske fluktuacije rastu/smanjuju s trendom.</p>
<p><strong>Model:</strong><br>
<code>Y(t) = Trend(t) * Sezonska(t) * Slučajna(t)</code></p>
<p><strong>Karakteristike:</strong></p>
<ul>
<li>Sezonske varijacije proporcionalne trendu</li>
<li>Često kod ekonomskih nizova s eksponencijalnim rastom</li>
<li>Zahtijeva log transformaciju ako postoje negativne vrijednosti</li>
</ul>
<p><strong>Primjer u R:</strong></p>
<pre class="hljs"><code><div>decomp_mult &lt;- decompose(AirPassengers, type = <span class="hljs-string">"multiplicative"</span>)
plot(decomp_mult)

log_ap &lt;- log(AirPassengers)
stl_mult &lt;- stl(log_ap, s.window = <span class="hljs-string">"periodic"</span>)
plot(stl_mult, main = <span class="hljs-string">"STL Multiplikativna dekompozicija"</span>)
</div></code></pre>
<p><img src="images/multi.png" alt="alt text"></p>
<p><img src="images/STLmulti.png" alt="alt text"></p>
<h3 id="stacionarnosti-vremenskog-niza">Stacionarnosti vremenskog niza</h3>
<p>Stacionarnost je ključni koncept u analizi vremenskih nizova. Vremenski niz se smatra stacionarnim ako njegove statističke karakteristike, kao što su srednja vrijednost, varijanca i kovarijanca, ne ovise o vremenu. Drugim riječima, stacionarni niz ne pokazuje dugoročne trendove i sezonske promjene, te je moguće predvidjeti njegove buduće vrijednosti na temelju prošlih podataka. Ako niz nije stacionaran, može biti potrebno primijeniti transformacije poput diferenciranja kako bi se postigla stacionarnost.</p>
<p>Vrste stacionarnosti:</p>
<ol>
<li><strong>Striktna stacionarnost</strong>:
<ul>
<li>Niz je striktno stacionaran ako su sve njegove distribucije u svim vremenskim točkama identične. Ovo uključuje ne samo srednju vrijednost, varijancu i kovarijancu, nego i sve više statističke momente.</li>
</ul>
</li>
<li><strong>Slaba stacionarnost</strong>:
<ul>
<li>Niz je slabo stacionaran ako su samo prva dva statistička momenta (srednja vrijednost i varijanca) konstantni kroz vrijeme, a kovarijanca između vrijednosti u različitim vremenskim točkama ovisi samo o vremenskom razmaku, a ne o apsolutnim vremenskim točkama.</li>
</ul>
</li>
</ol>
<h4 id="provjera-stacionarnosti">Provjera stacionarnosti</h4>
<p>Jedan od najpoznatijih testova za provjeru stacionarnosti vremenskog niza je <strong>Augmented Dickey-Fuller (ADF)</strong> test, koji testira hipotezu da niz ima jedinčasti korijen, odnosno da nije stacionaran. Ako p-vrijednost testa bude manja od 0.05, možemo odbaciti hipotezu da niz nije stacionaran i zaključiti da je niz stacionaran.</p>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div><span class="hljs-keyword">library</span>(tseries)

data(<span class="hljs-string">"AirPassengers"</span>)
vremenski_niz &lt;- AirPassengers

adf_test &lt;- adf.test(vremenski_niz)
adf_test
</div></code></pre>
<p><em>Output:</em></p>
<pre class="hljs"><code><div>Warning message:
In adf.test(vremenski_niz) : p-value smaller than printed p-value
&gt; adf_test

	Augmented Dickey-Fuller Test

data:  vremenski_niz
Dickey-Fuller = -<span class="hljs-number">7.3186</span>, Lag order = <span class="hljs-number">5</span>, p-value = <span class="hljs-number">0.01</span>
alternative hypothesis: stationary
</div></code></pre>
<p><strong>p-vrijednost</strong>: <code>0.01</code>
Ovaj rezultat znači da je p-vrijednost manja od 0.05, što sugerira da možemo odbaciti nultu hipotezu da vremenski niz nije stacionaran. Dakle, vremenski niz je stacionaran.</p>
<ul>
<li>
<p><strong>Dickey-Fuller</strong>: Vrijednost test statistike je -7.3186. Ova statistika mjeri koliko su podaci u skladu s hipotezom o postojanju jedinčastog korijena (ne-stacionarnosti). Manje negativne vrijednosti obično ukazuju na veću vjerojatnost da niz nije stacionaran, dok negativne vrijednosti poput ove sugeriraju da je niz vjerojatno stacionaran.</p>
</li>
<li>
<p><strong>Lag order = 5</strong>: Test je korišten s 5 vremenskih kašnjenja (lags), što znači da su uzeti u obzir prethodni podaci na 5 vremenskih razmaka u analizi.</p>
</li>
<li>
<p><strong>Alternative hypothesis</strong>: Hipoteza je da je niz stacionaran, što je u skladu s rezultatima p-vrijednosti.</p>
</li>
</ul>
<p><strong>Zaključak</strong>: Budući da je p-vrijednost manja od 0.05, možemo zaključiti da je vremenski niz stacionaran, odnosno da ne pokazuje dugoročne trendove ili sezonske promjene koje bi ometale daljnju analizu i modeliranje.</p>
<blockquote>
<p>Ako je p-vrijednost manja od 0.05, možemo zaključiti da je niz stacionaran.</p>
</blockquote>
<h4 id="prilagodba-niza-za-stacionarnost">Prilagodba niza za stacionarnost</h4>
<p>Ako vremenski niz nije stacionaran, možemo primijeniti nekoliko metoda za njegovu prilagodbu:</p>
<ol>
<li>
<p><strong>Diferenciranje</strong>:</p>
<ul>
<li>Diferenciranje je najčešće korištena tehnika za postizanje stacionarnosti. To znači da od svakog podatka oduzimamo prethodnu vrijednost, čime se uklanjaju trendovi i sezonske promjene. U R-u to možemo postići s funkcijom <code>diff()</code>.</li>
</ul>
<p>Funkcija <code>diff()</code> koristi se za izračun razlike između uzastopnih vrijednosti vremenskog niza, što pomaže u uklanjanju trenda i postizanju stacionarnosti.</p>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div>diferencirani_niz &lt;- diff(vremenski_niz, <span class="hljs-number">1</span>)
adf.test(diferencirani_niz)
</div></code></pre>
<p>Funkcija <code>ndiffs()</code> automatski određuje broj diferencijacija potrebnih za postizanje stacionarnosti vremenskog niza.</p>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div>num_diffs &lt;- ndiffs(ap)
num_diffs  <span class="hljs-comment"># Vraća broj potrebnih diferencijacija za stacionarnost, 1 u ovom slučaju</span>
</div></code></pre>
</li>
<li>
<p><strong>Logaritamska transformacija</strong>:</p>
<ul>
<li>Ako niz pokazuje eksponencijalni rast, primjena logaritamske transformacije može pomoći u stabilizaciji varijance i postizanju stacionarnosti.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Logaritamska transformacija</span>
log_niz &lt;- log(vremenski_niz)
adf.test(log_niz)
</div></code></pre>
</li>
</ol>
<h3 id="acf-i-pacf">ACF i PACF</h3>
<p><strong>ACF (<em>Autocorrelation Function</em>)</strong> i <strong>PACF (<em>Partial Autocorrelation Function</em>)</strong> su dva ključna alata za analizu vremenskih nizova. Ove funkcije pomažu u razumijevanju odnosa između različitih vremenskih točaka unutar niza i korištene su u identifikaciji odgovarajućih modela za vremenske nizove, poput ARIMA modela.</p>
<h4 id="acf-autocorrelation-function">ACF (Autocorrelation Function)</h4>
<p>ACF mjeri ukupnu korelaciju između trenutnih i prošlih vrijednosti vremenskog niza. To pokazuje kako su prošle vrijednosti povezane s trenutnim stanjem. Na primjer, ako se promjena u prošlim vrijednostima negativno ili pozitivno odražava na trenutne vrijednosti, ACF će to pokazati.</p>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div>data(<span class="hljs-string">"AirPassengers"</span>)
ap &lt;- AirPassengers

acf(ap, main = <span class="hljs-string">"ACF - AirPassengers"</span>)
</div></code></pre>
<p><img src="images/acf.png" alt="alt text"></p>
<ul>
<li>Ako ACF prikazuje visoke korelacije u početnim vremenskim pomacima, to može značiti da je niz značajno <em>autocorrelated</em>, tj. da postoje značajni trendovi ili sezonske komponente.</li>
</ul>
<h4 id="pacf-partial-autocorrelation-function">PACF (Partial Autocorrelation Function)</h4>
<p>PACF mjeri korelaciju između trenutne i prošle vrijednosti vremenskog niza, uzimajući u obzir sve intermedijarne vremenske točke. To je korisno za utvrđivanje koji broj prethodnih vrijednosti je potrebno uključiti u model. PACF je koristan kada želimo razumjeti utjecaj točno određene vremenske točke bez &quot;smetnji&quot; drugih vremenskih točaka.</p>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div>pacf(ap, main = <span class="hljs-string">"PACF - AirPassengers"</span>)
</div></code></pre>
<p><img src="images/pacf.png" alt="alt text"></p>
<ul>
<li>Ako PACF pokazuje značajnu korelaciju samo na početnim pomacima, to može ukazivati na to da se model treba fokusirati samo na te početne vrijednosti, dok kasniji pomaci nemaju značajan utjecaj.</li>
</ul>
<h4 id="kori%C5%A1tenje-acf-i-pacf-u-modeliranju">Korištenje ACF i PACF u modeliranju</h4>
<ul>
<li><strong>ACF</strong> je koristan za odabir redova MA (Moving Average) dijela ARIMA modela, dok <strong>PACF</strong> pomaže u odabiru redova <strong>AR</strong> (<em>AutoRegressive</em>) dijela.</li>
<li>Ako <strong>ACF</strong> pokazuje značajnu korelaciju na početnim pomacima, ali brzo opada, to može sugerirati da je <strong>MA</strong> model prikladan.</li>
<li>Ako <strong>PACF</strong> pokazuje značajnu korelaciju na početnim pomacima, a zatim opada, to može sugerirati da je <strong>AR</strong> model prikladan.</li>
</ul>
<blockquote>
<p>Ovisno o vizualizaciji ACF-a i PACF-a, možemo odlučiti koje parametre AR i MA odabrati za ARIMA model.</p>
</blockquote>
<h3 id="arima-model">ARIMA model</h3>
<p><strong>ARIMA</strong> (<em>AutoRegressive Integrated Moving Averag</em>e) je model koji kombinira autoregresiju, diferenciranje i pomični prosjek kako bi predvidio buduće vrijednosti vremenskog niza.</p>
<p><em>Primjer:</em></p>
<pre class="hljs"><code><div>data(<span class="hljs-string">"AirPassengers"</span>)
ap &lt;- AirPassengers

ap_arima &lt;- auto.arima(ap)

summary(ap_arima)
</div></code></pre>
<div class="page"></div>
<p><em>Output:</em></p>
<pre class="hljs"><code><div>Series: ap 
ARIMA(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)[<span class="hljs-number">12</span>] 

Coefficients:
         ar1     ar2      ma1
      <span class="hljs-number">0.5960</span>  <span class="hljs-number">0.2143</span>  -<span class="hljs-number">0.9819</span>
s.e.  <span class="hljs-number">0.0888</span>  <span class="hljs-number">0.0880</span>   <span class="hljs-number">0.0292</span>

sigma^<span class="hljs-number">2</span> = <span class="hljs-number">132.3</span>:  log likelihood = -<span class="hljs-number">504.92</span>
AIC=<span class="hljs-number">1017.85</span>   AICc=<span class="hljs-number">1018.17</span>   BIC=<span class="hljs-number">1029.35</span>

Training set error measures:
                 ME     RMSE     MAE      MPE     MAPE     MASE        ACF1
Training set <span class="hljs-number">1.3423</span> <span class="hljs-number">10.84619</span> <span class="hljs-number">7.86754</span> <span class="hljs-number">0.420698</span> <span class="hljs-number">2.800458</span> <span class="hljs-number">0.245628</span> -<span class="hljs-number">0.00124847</span>
</div></code></pre>
<p><strong>ARIMA(2,1,1)(0,1,0)[12]</strong>: Ovaj model koristi dva autoregresivna parametra (AR(2)), jedan pomični prosjek (MA(1)), s prvim diferenciranjem i sezonskim diferenciranjem na 12 mjeseci. Model je optimiziran za predviđanje vremenskih nizova sa sezonskim obrazcima.</p>
<p><strong>AR1</strong>: Koeficijent <code>0.5960</code> znači da vrijednost vremenskog niza u trenutnom mjesecu ima značajnu pozitivnu korelaciju sa stanjem prije mjesec dana. Za svaki porast prethodne vrijednosti, trenutna vrijednost će se povećati za 0.5960.</p>
<p><strong>AR2</strong>: Koeficijent <code>0.2143</code> pokazuje umjerenu pozitivnu korelaciju između trenutne vrijednosti i vrijednosti dva mjeseca prije. Za svaku promjenu u vrijednosti prije dva mjeseca, trenutna vrijednost se mijenja za 0.2143.</p>
<p><strong>MA1</strong>: Koeficijent <code>-0.9819</code> označava da postoji snažna negativna korelacija između trenutne vrijednosti i pogreške koja je nastala prije mjesec dana. To znači da velike pogreške iz prošlih razdoblja snažno utječu na trenutnu vrijednost, ali u suprotnom smjeru.</p>
<p><strong>AIC (<em>Akaike Information Criterion</em>)</strong>: Vrijednost <code>1017.85</code> pokazuje kvalitetu modela, pri čemu niže vrijednosti AIC označavaju bolji model. AIC je koristan za usporedbu različitih modela.</p>
<p><strong>BIC (<em>Bayesian Information Criterion</em>)</strong>: BIC je sličan AIC-u, ali uključuje i kaznu za broj parametara u modelu. Vrijednost <code>1029.35</code> pomaže u odabiru modela s nižim rizikom od pretreniranja.</p>
<ul>
<li>
<p><strong>Training set error measures</strong>:</p>
<ul>
<li><strong>ME (Mean Error)</strong>: <code>1.3423</code>, što znači da je prosječna pogreška modela u predviđanju 1.34</li>
<li><strong>RMSE (Root Mean Squared Error)</strong>: <code>10.84619</code> ukazuje na veličinu pogreške u modelu</li>
<li><strong>MAE (Mean Absolute Error)</strong>: <code>7.86754</code> označava prosječnu apsolutnu pogrešku predviđanja</li>
<li><strong>MPE (Mean Percentage Error)</strong>: <code>0.420698</code> označava postotnu pogrešku modela</li>
<li><strong>MAPE (Mean Absolute Percentage Error)</strong>: <code>2.800458</code> pokazuje postotak pogreške u modelu</li>
<li><strong>MASE (Mean Absolute Scaled Error)</strong>: <code>0.245628</code> ukazuje na skaliranu pogrešku u modelu u odnosu na osnovni model</li>
<li><strong>ACF1</strong>: <code>-0.00124847</code> označava nisku korelaciju između pogrešaka modela i prethodnih pogrešaka, što sugerira da model ima dobar fit</li>
</ul>
</li>
</ul>
<p><em><strong>ARIMA predikcija</strong> putnika:</em></p>
<pre class="hljs"><code><div>ap_forecast_arima &lt;- forecast(ap_arima, h = <span class="hljs-number">36</span>)

autoplot(ap_forecast_arima) +
  ggtitle(<span class="hljs-string">"ARIMA predikcija broja putnika"</span>) +
  xlab(<span class="hljs-string">"Godina"</span>) + ylab(<span class="hljs-string">"Broj putnika"</span>)
</div></code></pre>
<p><img src="images/ARIMA prediction.png" alt="alt text"></p>
<div class="page"></div>
<h2 id="klasifikacija">Klasifikacija</h2>
<p>Klasifikacija je nadzirana tehnika strojnog učenja koja se koristi za predviđanje kategoričkih vrijednosti. Cilj je dodijeliti ulazne podatke unaprijed definiranim klasama na temelju značajki (<em>features</em>). U R-u se klasifikacija može provoditi korištenjem različitih algoritama, ovisno o prirodi problema i podataka.</p>
<ul>
<li><strong>Klasa</strong>: Kategorija ili skupina u koju se podatak svrstava (npr. &quot;bolest&quot; / &quot;nema bolesti&quot;)</li>
<li><strong>Značajke (features)</strong>: Varijable koje se koriste za predviđanje klase</li>
<li><strong>Model</strong>: Algoritam koji uči vezu između značajki i ciljne varijable</li>
</ul>
<p><strong>Tipovi klasifikacijskih problema:</strong></p>
<ol>
<li>
<p><strong>Binarna klasifikacija</strong>:</p>
<ul>
<li>Samo dvije moguće klase (<em>npr. spam/ne-spam</em>)</li>
</ul>
</li>
<li>
<p><strong>Multiklasna klasifikacija</strong>:</p>
<ul>
<li>Više od dvije klase (<em>npr. prepoznavanje znamenki 0-9</em>)</li>
</ul>
</li>
<li>
<p><strong>Multilabelna klasifikacija</strong>:</p>
<ul>
<li>Jedan primjer može pripadati više klasama istovremeno</li>
</ul>
</li>
</ol>
<p><em>Algoritmi klasifikacije:</em></p>
<table>
<thead>
<tr>
<th>Algoritam</th>
<th>Paket u R-u</th>
<th>Opis</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Stabla odluke</strong></td>
<td><code>rpart()</code></td>
<td>Hijerarhijska struktura za donošenje odluka koja dijeli podatke prema značajkama.</td>
</tr>
<tr>
<td><strong>Slučajna šuma</strong></td>
<td><code>randomForest()</code></td>
<td>Ansambl metoda koja koristi više stabala odluke za poboljšanje točnosti i robusnosti.</td>
</tr>
<tr>
<td><strong>Naivni Bayes</strong></td>
<td><code>e1071</code></td>
<td>Probabilistički klasifikator temeljen na Bayesovom teoremu i pretpostavci nezavisnosti značajki.</td>
</tr>
<tr>
<td><strong>K-najbližih susjeda</strong></td>
<td><code>class::knn()</code></td>
<td>Metoda koja klasificira primjer prema većinskoj klasi njegovih najbližih susjeda.</td>
</tr>
</tbody>
</table>
<h3 id="stablo-odluke">Stablo odluke</h3>
<p><strong>Stablo odluke</strong> je <strong>model za prediktivnu analizu</strong> koji koristi strukturu nalik stablu za donošenje odluka i predviđanje ishoda. Sastoji se od:</p>
<ul>
<li><strong>Čvorova odluke</strong> (<em>unutarnji čvorovi</em>) koji predstavljaju testiranje neke značajke (<em>npr. je li visina &gt; 170 cm</em>),</li>
<li><strong>Grana</strong> koje vode do sljedećih čvorova ovisno o ishodu testa</li>
<li><strong>Listova</strong> (<em>krajnjih čvorova</em>) koji predstavljaju konačne odluke ili predikcije (<em>npr. klasa „da“ ili „ne“</em>).</li>
</ul>
<p>Prednosti su što je model <strong>lako razumljiv i vizualno jasan</strong>, dok je glavni nedostatak <strong>osjetljivost na pretreniravanje</strong>, posebno kada je stablo duboko i složeno.</p>
<p>U R-u se može izraditi pomoću funkcije <code>rpart()</code> iz paketa <code>rpart</code>, a vizualizirati s <code>rpart.plot</code>.</p>
<p><em>Primjer: Stablo odluke za iris dataset</em></p>
<pre class="hljs"><code><div><span class="hljs-comment">#install.packages("rpart")</span>
<span class="hljs-comment">#install.packages("rpart.plot")</span>
<span class="hljs-keyword">library</span>(rpart)
<span class="hljs-keyword">library</span>(rpart.plot)

<span class="hljs-comment"># Podjela podataka na trening i test skup</span>
set.seed(<span class="hljs-number">123</span>)
indeksi &lt;- sample(<span class="hljs-number">1</span>:nrow(iris), <span class="hljs-number">0.7</span>*nrow(iris))
train &lt;- iris[indeksi,]
test &lt;- iris[-indeksi,]

<span class="hljs-comment"># Izgradnja stabla</span>
stablo &lt;- rpart(Species ~ ., data = train, method = <span class="hljs-string">"class"</span>)

<span class="hljs-comment"># Vizualizacija</span>
rpart.plot(stablo)
</div></code></pre>
<p><img src="images/stablo.png" alt="alt text"></p>
<div class="page"></div>
<p><em>Primjer: Analiza stabla</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># najvažnije varijable</span>
stablo$variable.importance
<span class="hljs-comment"># Petal.Width Petal.Length Sepal.Length  Sepal.Width </span>
<span class="hljs-comment">#     60.83978     56.37649     37.31876     23.48140 </span>

<span class="hljs-comment"># najvažnije varijable</span>
stablo$cptable
<span class="hljs-comment">#          CP nsplit  rel error    xerror       xstd</span>
<span class="hljs-comment"># 1 0.5294118      0 1.00000000 1.2058824 0.06232572</span>
<span class="hljs-comment"># 2 0.3970588      1 0.47058824 0.5441176 0.07198662</span>
<span class="hljs-comment"># 3 0.0100000      2 0.07352941 0.1176471 0.03997857</span>
</div></code></pre>
<ul>
<li><code>variable.importance</code> prikazuje važnost varijabli korištenih u stablu. Veće vrijednosti znači da je varijabla više puta korištena u granama koje su najviše doprinijele smanjenju nečistoće.</li>
<li><code>cptable</code> sadrži tablicu parametara rezanja stabla (<em>complexity parameter table</em>), Koristi se za odabir optimalne veličine stabla, tj. koliko jako &quot;rezati&quot; stablo da se izbjegne pretreniranost</li>
</ul>
<table>
<thead>
<tr>
<th>Stupac</th>
<th>Značenje</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CP</code></td>
<td>Complexity parameter – veće vrijednosti znače <strong>jače rezanje</strong> stabla</td>
</tr>
<tr>
<td><code>nsplit</code></td>
<td>Broj podjela (<em>čvorova</em>) u stablu</td>
</tr>
<tr>
<td><code>rel error</code></td>
<td>Relativna pogreška – greška trenutnog stabla u odnosu na početnu</td>
</tr>
<tr>
<td><code>xerror</code></td>
<td>Križno-validacijska greška (procjena pogreške na novim podacima)</td>
</tr>
<tr>
<td><code>xstd</code></td>
<td>Standardna pogreška križno-validacijske greške</td>
</tr>
</tbody>
</table>
<p><em>Primjer: Rezanje stabla</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># uzimamo cp s velikom nsplit vrijednosti</span>
podreznao_stablo &lt;- prune(stablo, cp=<span class="hljs-number">0.0100000</span>)
</div></code></pre>
<p><em>Primjer: Predikcija i evaluacija</em></p>
<pre class="hljs"><code><div><span class="hljs-comment">#install.packages("caret")</span>
<span class="hljs-keyword">library</span>(caret)

<span class="hljs-comment"># Predikcija</span>
predikcije &lt;- predict(stablo, test, type = <span class="hljs-string">"class"</span>)

<span class="hljs-comment"># Evaluacija</span>
confusionMatrix(predikcije, test$Species)
</div></code></pre>
<div class="page"></div>
<p><em>Output:</em></p>
<pre class="hljs"><code><div>Confusion Matrix and Statistics

            Reference
Prediction   setosa versicolor virginica
  setosa         <span class="hljs-number">14</span>          <span class="hljs-number">0</span>         <span class="hljs-number">0</span>
  versicolor      <span class="hljs-number">0</span>         <span class="hljs-number">18</span>         <span class="hljs-number">1</span>
  virginica       <span class="hljs-number">0</span>          <span class="hljs-number">0</span>        <span class="hljs-number">12</span>

Overall Statistics
                                          
               Accuracy : <span class="hljs-number">0.9778</span>          
                 <span class="hljs-number">95</span>% CI : (<span class="hljs-number">0.8823</span>, <span class="hljs-number">0.9994</span>)
    No Information Rate : <span class="hljs-number">0.4</span>             
    P-Value [Acc &gt; NIR] : &lt; <span class="hljs-number">2.2e-16</span>       
                                          
                  Kappa : <span class="hljs-number">0.9662</span>          
                                          
 Mcnemar<span class="hljs-string">'s Test P-Value : NA              

Statistics by Class:

                     Class: setosa Class: versicolor Class: virginica
Sensitivity                 1.0000            1.0000           0.9231
Specificity                 1.0000            0.9630           1.0000
Pos Pred Value              1.0000            0.9474           1.0000
Neg Pred Value              1.0000            1.0000           0.9697
Prevalence                  0.3111            0.4000           0.2889
Detection Rate              0.3111            0.4000           0.2667
Detection Prevalence        0.3111            0.4222           0.2667
Balanced Accuracy           1.0000            0.9815           0.9615
</span></div></code></pre>
<p>Konfuzijska matrica prikazuje koliko je model točno ili pogrešno klasificirao primjere za svaku klasu:</p>
<ul>
<li><strong>Setosa:</strong> svih 14 primjera su ispravno klasificirani</li>
<li><strong>Versicolor:</strong> 18 ispravno, 1 pogrešno klasificiran kao <em>virginica</em></li>
<li><strong>Virginica:</strong> 12 ispravno, nijedan pogrešno klasificiran</li>
</ul>
<p><strong>Overall Statistics</strong>:</p>
<ul>
<li>
<p><strong>Accuracy: 0.9778</strong>
Točnost modela: ~97.78%. Od svih primjera, gotovo svi su točno klasificirani.</p>
</li>
<li>
<p><strong>95% CI: (0.8823, 0.9994)</strong>
Interval pouzdanosti: pravi rezultat točnosti u populaciji je između 88.23% i 99.94%, s 95% sigurnošću.</p>
</li>
<li>
<p><strong>No Information Rate (NIR): 0.4</strong>
Točnost koju bismo dobili da <strong>uvijek pogodimo najčešću klasu</strong> (<em>versicolor u ovom slučaju</em>).
→ Modelova točnost (97.78%) je <strong>znatno bolja</strong> od NIR-a (40%).</p>
</li>
<li>
<p><strong>P-Value [Acc &gt; NIR]: &lt; 2.2e-16</strong>
Statistički značajna razlika između modelove točnosti i NIR-a
→ Model je <strong>puno bolji od slučajnog pogađanja</strong></p>
</li>
<li>
<p><strong>Kappa: 0.9662</strong>
Mjera slaganja između predikcije i stvarnih vrijednosti <strong>korekcijom za slučajnost</strong>.</p>
<ul>
<li>1 = savršena točnost, 0 = pogađanje nasumično
→ 0.9662 označava <strong>izvrsnu pouzdanost</strong></li>
</ul>
</li>
</ul>
<ul>
<li><strong>McNemar's Test P-Value: NA</strong>
Ova statistika se koristi za binarnu klasifikaciju; ovdje nije primjenjiva jer imamo 3 klase.</li>
</ul>
<p>Za svaku klasu (<em>setosa, versicolor, virginica</em>):</p>
<table>
<thead>
<tr>
<th>Metrika</th>
<th>Značenje</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Sensitivity</strong></td>
<td>Tj. <em>recall</em>, koliko stvarnih primjera klase je ispravno prepoznato.</td>
</tr>
<tr>
<td><strong>Specificity</strong></td>
<td>Koliko ostalih klasa je točno klasificirano kao &quot;ne-ta klasa&quot;.</td>
</tr>
<tr>
<td><strong>Pos Pred Value</strong></td>
<td>Tj. <em>precision</em>, koliko predviđenih pripadnika klase je stvarno točno.</td>
</tr>
<tr>
<td><strong>Neg Pred Value</strong></td>
<td>Koliko negativnih predikcija je točno (npr. ono što nije setosa – nije).</td>
</tr>
<tr>
<td><strong>Prevalence</strong></td>
<td>Udio te klase u cijelom skupu podataka.</td>
</tr>
<tr>
<td><strong>Detection Rate</strong></td>
<td>Udio ispravno klasificiranih instanci određene klase.</td>
</tr>
<tr>
<td><strong>Detection Prev.</strong></td>
<td>Koliko je puta model predvidio tu klasu, podijeljeno sa svim primjerima.</td>
</tr>
<tr>
<td><strong>Balanced Accuracy</strong></td>
<td>Prosjek između Sensitivity i Specificity.</td>
</tr>
</tbody>
</table>
<h3 id="random-forest">Random forest</h3>
<p><strong>Random forest</strong> je ansambl metoda za strojno učenje koja kombinira više stabala odluke kako bi poboljšala točnost i robusnost modela. Svako stablo se trenira na slučajnom podskupu podataka i značajki (tzv. <em>bagging</em>), a konačna odluka donosi se glasanjem (<em>za klasifikaciju</em>) ili prosjekom (<em>za regresiju</em>).</p>
<ul>
<li><strong>Robustan na šum i outliere</strong> — jer kombinira više modela</li>
<li><strong>Smanjuje pretreniranost</strong> u odnosu na pojedinačna stabla</li>
<li><strong>Manje interpretabilan</strong> — jer je teško vizualizirati mnogo stabala zajedno</li>
</ul>
<p><em>Primjer: Random forest za PimaIndiansDiabetes</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># install.packages("randomForest")</span>
<span class="hljs-comment"># install.packages("caret")</span>
<span class="hljs-keyword">library</span>(randomForest)
<span class="hljs-keyword">library</span>(caret)

<span class="hljs-comment"># Učitavanje podataka</span>
data(<span class="hljs-string">"PimaIndiansDiabetes"</span>)
diabetes &lt;- PimaIndiansDiabetes

<span class="hljs-comment"># Podjela podataka (70% trening, 30% test)</span>
set.seed(<span class="hljs-number">123</span>)
indeksi &lt;- sample(<span class="hljs-number">1</span>:nrow(diabetes), <span class="hljs-number">0.7</span>*nrow(diabetes))
train &lt;- diabetes[indeksi, ]
test &lt;- diabetes[-indeksi, ]

<span class="hljs-comment"># Izgradnja modela (ciljna varijabla je 'diabetes')</span>
model &lt;- randomForest(diabetes ~ ., data = train)

<span class="hljs-comment"># Broj stabala</span>
forest$ntree <span class="hljs-comment"># 500</span>

<span class="hljs-comment"># Broj varijabli (prediktora)</span>
forest$mtry <span class="hljs-comment"># 2</span>

<span class="hljs-comment"># Važnost varijabli</span>
importance(model)
<span class="hljs-comment">#          MeanDecreaseGini</span>
<span class="hljs-comment"># pregnant         19.86030</span>
<span class="hljs-comment"># glucose          62.96948</span>
<span class="hljs-comment"># pressure         21.92756</span>
<span class="hljs-comment"># triceps          17.33345</span>
<span class="hljs-comment"># insulin          19.09810</span>
<span class="hljs-comment"># mass             42.21571</span>
<span class="hljs-comment"># pedigree         29.56443</span>
<span class="hljs-comment"># age              29.14090</span>

<span class="hljs-comment"># grafički prikaz</span>
varImpPlot(model)
</div></code></pre>
<p><img src="images/randomforesetvars.png" alt="alt text"></p>
<div class="page"></div>
<p><em>Predikcija i evaluacija:</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Predikcija na testnom skupu</span>
predikcije &lt;- predict(model, test)

<span class="hljs-comment"># Evaluacija - matrica konfuzije</span>
confusionMatrix(predikcije, test$diabetes)
</div></code></pre>
<p><em>Output:</em></p>
<pre class="hljs"><code><div>Confusion Matrix and Statistics

          Reference
Prediction neg pos
       neg <span class="hljs-number">126</span>  <span class="hljs-number">36</span>
       pos  <span class="hljs-number">24</span>  <span class="hljs-number">45</span>
                                          
               Accuracy : <span class="hljs-number">0.7403</span>          
                 <span class="hljs-number">95</span>% CI : (<span class="hljs-number">0.6787</span>, <span class="hljs-number">0.7956</span>)
    No Information Rate : <span class="hljs-number">0.6494</span>          
    P-Value [Acc &gt; NIR] : <span class="hljs-number">0.001953</span>        
                                          
                  Kappa : <span class="hljs-number">0.4095</span>          
                                          
 Mcnemar<span class="hljs-string">'s Test P-Value : 0.155580        
                                          
            Sensitivity : 0.8400          
            Specificity : 0.5556          
         Pos Pred Value : 0.7778          
         Neg Pred Value : 0.6522          
             Prevalence : 0.6494          
         Detection Rate : 0.5455          
   Detection Prevalence : 0.7013          
      Balanced Accuracy : 0.6978          
                                          
       '</span>Positive<span class="hljs-string">' Class : neg      
</span></div></code></pre>
<p>Oznaka <code>'Positive' Class : neg</code> znači da je u evaluaciji modela kao <em>&quot;pozitivna&quot;</em> klasa definirana klasa <em>&quot;neg&quot;</em></p>
<ul>
<li><strong>Pozitivna klasa</strong> je ona na koju se računaju mjere kao što su senzitivnost (<em>sensitivity</em>), pozitivna prediktivna vrijednost (<em>precision</em>) i dr.</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>Reference (stvarno)</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Prediction</strong></td>
<td>neg</td>
<td>pos</td>
</tr>
<tr>
<td>neg</td>
<td>126</td>
<td>36</td>
</tr>
<tr>
<td>pos</td>
<td>24</td>
<td>45</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>126</strong>: model je točno predvidio &quot;neg&quot; (<em>negativne primjere</em>)</li>
<li><strong>36</strong>: model je pogrešno predvidio &quot;neg&quot; umjesto &quot;pos&quot;</li>
<li><strong>24</strong>: model je pogrešno predvidio &quot;pos&quot; umjesto &quot;neg&quot;</li>
<li><strong>45</strong>: model je točno predvidio &quot;pos&quot;</li>
</ul>
<p><strong>McNemarov test</strong> se koristi za procjenu razlike između dvije povezane klasifikacije, najčešće u binarnoj klasifikaciji.</p>
<ul>
<li><strong>P-vrijednost &gt; 0.05</strong> (<em>npr. 0.155580</em>) znači da nema dovoljno dokaza da se razlikuju dvije klasifikacije u smislu pogrešaka.</li>
<li>Drugim riječima, <strong>ne odbacujemo hipotezu</strong> da su pogreške modela i referentnog modela (<em>ili dvije metode</em>) slične.</li>
</ul>
<h2 id="grupiranje">Grupiranje</h2>
<p><strong>Grupiranje (<em>engl. clustering</em>)</strong> je tehnika nenadziranog učenja (<em>engl. unsupervised learning</em>). koja služi za grupiranje sličnih primjera u skupine, odnosno <em>klastere</em>, na temelju njihovih značajki. Za razliku od klasifikacije, kod grupiranja ne postoji unaprijed zadana <em>ciljna varijabla</em> — algoritam sam otkriva prirodne skupine unutar podataka.</p>
<p><strong>Klaster</strong> je skup sličnih objekata koji su međusobno što sličniji, a različiti od objekata u drugim klasterima. Dobri klasteri imaju:</p>
<ul>
<li>Veliku sličnost unutar klastera (<em>homogenost</em>),</li>
<li>Mali stupanj sličnosti između klastera (<em>separabilnost</em>).</li>
</ul>
<p><strong>Mjere sličnosti</strong>:</p>
<ul>
<li>Euklidska udaljenost: $$\sqrt{\sum_{i=1}^n (x_i - y_i)^2}$$</li>
<li>Manhattan udaljenost: $$\sum_{i=1}^n |x_i - y_i|$$</li>
<li>Kosinusna udaljenost: $$\frac{x \cdot y}{|x| |y|}$$</li>
</ul>
<h3 id="k-means">K-means</h3>
<p><strong>K-means</strong> je jedan od najpopularnijih algoritama za grupiranje podataka. Cilj mu je podijeliti podatke u <code>K</code> klastera tako da se <strong>minimizira zbroj kvadrata udaljenosti</strong> između elemenata i njihovih centara klastera, odnosno da se smanji varijanca unutar svakog klastera.</p>
<div class="page"></div>
<p><em>Traženje optimalnog broja klastera:</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># install.packages("NbClust")</span>
<span class="hljs-keyword">library</span>(NbClust)

data(iris)
iris_features &lt;- iris[, <span class="hljs-number">1</span>:<span class="hljs-number">4</span>]

set.seed(<span class="hljs-number">123</span>)

<span class="hljs-comment"># Traženje optimalnog broja klastera</span>
nb &lt;- NbClust(data = iris_features, distance = <span class="hljs-string">"euclidean"</span>, method = <span class="hljs-string">"kmeans"</span>)

<span class="hljs-comment"># ******************************************************************* </span>
<span class="hljs-comment"># * Among all indices:                                                </span>
<span class="hljs-comment"># * 11 proposed 2 as the best number of clusters </span>
<span class="hljs-comment"># * 11 proposed 3 as the best number of clusters </span>
<span class="hljs-comment"># * 1 proposed 8 as the best number of clusters </span>
<span class="hljs-comment"># * 1 proposed 12 as the best number of clusters </span>
<span class="hljs-comment"># </span>
<span class="hljs-comment">#                    ***** Conclusion *****                            </span>
<span class="hljs-comment">#  </span>
<span class="hljs-comment"># * According to the majority rule, the best number of clusters is  2 </span>
<span class="hljs-comment">#  </span>
<span class="hljs-comment">#  </span>
<span class="hljs-comment"># ******************************************************************* </span>

<span class="hljs-comment"># Prikaz optimalnog broja klastera prema većini kriterija</span>
bestnc &lt;- nb$Best.nc[<span class="hljs-number">1</span>, ] 
table(bestnc)

<span class="hljs-comment"># bestnc</span>
<span class="hljs-comment">#  0  2  3  8 12 </span>
<span class="hljs-comment">#  2 11 11  1  1 </span>
</div></code></pre>
<p><img src="images/find_k_clusters.png" alt="alt text"></p>
<p><em>Primjena kmeans():</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Primjena K-means s K=3</span>
set.seed(<span class="hljs-number">123</span>)
kmeans_result &lt;- kmeans(iris_features, centers = <span class="hljs-number">2</span>)
</div></code></pre>
<p><em>Output:</em></p>
<pre class="hljs"><code><div>K-means clustering with <span class="hljs-number">3</span> clusters of sizes <span class="hljs-number">50</span>, <span class="hljs-number">62</span>, <span class="hljs-number">38</span>

Cluster means:
  Sepal.Length Sepal.Width Petal.Length Petal.Width
<span class="hljs-number">1</span>     <span class="hljs-number">5.006000</span>    <span class="hljs-number">3.428000</span>     <span class="hljs-number">1.462000</span>    <span class="hljs-number">0.246000</span>
<span class="hljs-number">2</span>     <span class="hljs-number">5.901613</span>    <span class="hljs-number">2.748387</span>     <span class="hljs-number">4.393548</span>    <span class="hljs-number">1.433871</span>
<span class="hljs-number">3</span>     <span class="hljs-number">6.850000</span>    <span class="hljs-number">3.073684</span>     <span class="hljs-number">5.742105</span>    <span class="hljs-number">2.071053</span>

Clustering vector:
  [<span class="hljs-number">1</span>] <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span>
 [<span class="hljs-number">43</span>] <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span>
 [<span class="hljs-number">85</span>] <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span>
[<span class="hljs-number">127</span>] <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span>

Within cluster sum of squares by cluster:
[<span class="hljs-number">1</span>] <span class="hljs-number">15.15100</span> <span class="hljs-number">39.82097</span> <span class="hljs-number">23.87947</span>
 (between_SS / total_SS =  <span class="hljs-number">88.4</span> %)
</div></code></pre>
<p>K-means grupiranje s <strong>2</strong> klastera:</p>
<ul>
<li><strong>Veličine klastera</strong>: 53 i 97 primjera</li>
<li><strong>Centroidi</strong>: srednje vrijednosti za svaki atribut po klasterima.</li>
<li><strong>Clustering vector</strong>: vektor koji prikazuje kojem klasteru pripada svaki primjerak.</li>
<li><strong>Within-cluster sum of squares</strong>: mjera homogenosti klastera. Manja vrijednost znači da su primjeri bliže centru klastera.</li>
<li><strong>between_SS / total_SS = 77.6 %</strong>: 77.6 % ukupne varijance u podacima je objašnjeno ovom podjelom – što ukazuje na dobru separaciju.</li>
</ul>
<p><em>Stavke K-means:</em></p>
<pre class="hljs"><code><div>kmeans_result$cluster 
<span class="hljs-comment">#   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="hljs-comment">#  [43] 1 1 1 1 1 1 1 1 2 2 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 2 2 2 2 2 2</span>
<span class="hljs-comment">#  [85] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 2 3 3 3 3 2 3 3 3 3 3 3 2 2 3 3 3 3 2 3 2 3 2 3 3</span>
<span class="hljs-comment"># [127] 2 2 3 3 3 3 3 2 3 3 3 3 2 3 3 3 2 3 3 3 2 3 3 2</span>

kmeans_result$size
<span class="hljs-comment"># [1] 50 62 38</span>

kmeans_result$withinss
<span class="hljs-comment"># [1] 15.15100 39.82097 23.87947</span>

kmeans_result$betweenss
<span class="hljs-comment"># [1] 602.5192</span>

<span class="hljs-comment"># Prikaz rezultata</span>
table(kmeans_result$cluster, iris$Species)

<span class="hljs-comment">#    setosa versicolor virginica</span>
<span class="hljs-comment">#  1     50          0         0</span>
<span class="hljs-comment">#  2      0         48        14</span>
<span class="hljs-comment">#  3      0          2        36</span>
</div></code></pre>
<ul>
<li><strong><code>kmeans_result$cluster</code></strong> – vektor koji pokazuje kojem klasteru pripada svaki primjerak iz skupa podataka.</li>
<li><strong><code>kmeans_result$size</code></strong> – broj elemenata u svakom klasteru.</li>
<li><strong><code>kmeans_result$withinss</code></strong> – unutar-klasterska suma kvadrata za svaki klaster (<em>mjera koliko su podaci unutar klastera blizu svom centru</em>).</li>
<li><strong><code>kmeans_result$betweenss</code></strong> – između-klasterska suma kvadrata (<em>mjera koliko su klasteri međusobno udaljeni; viša vrijednost znači bolju razdvojenost</em>).</li>
</ul>
<p><em>K-means vizualizacija:</em></p>
<pre class="hljs"><code><div>plot(iris_features[, c(<span class="hljs-string">"Sepal.Length"</span>, <span class="hljs-string">"Sepal.Width"</span>)], 
     col = kmeans_result$cluster, 
     main = <span class="hljs-string">"K-means grupiranje (K=3)"</span>)
points(kmeans_result$centers[, c(<span class="hljs-string">"Sepal.Length"</span>, <span class="hljs-string">"Sepal.Width"</span>)], 
       col = <span class="hljs-number">1</span>:<span class="hljs-number">3</span>, pch = <span class="hljs-number">8</span>, cex = <span class="hljs-number">2</span>)
</div></code></pre>
<p><img src="images/kmeangraph.png" alt="alt text"></p>
<p><em>Evaluacija i usporedba:</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># install.packages("flexclust")</span>
<span class="hljs-keyword">library</span>(flexclust)

<span class="hljs-comment"># Pretvaranje rezultata u Kcentroids objekt</span>
kcca_model &lt;- as.kcca(kmeans_result, iris_features)

<span class="hljs-comment"># Dodjela klastera pomoću flexclust metode</span>
clusters_flex &lt;- predict(kcca_model)

<span class="hljs-comment"># Evaluacija točnosti u odnosu na stvarne klase</span>
table(clusters_flex, iris$Species)
<span class="hljs-comment"># clusters_flex setosa versicolor virginica</span>
<span class="hljs-comment">#             1     50          0         0</span>
<span class="hljs-comment">#             2      0         48        14</span>
<span class="hljs-comment">#             3      0          2        36</span>

<span class="hljs-comment"># Preciznost klasifikacije</span>
randIndex(table(clusters_flex, iris$Species))
<span class="hljs-comment">#       ARI </span>
<span class="hljs-comment"># 0.7302383 </span>
</div></code></pre>
<ul>
<li><strong>Tablica klastera</strong> pokazuje da je <em>setosa</em> savršeno prepoznata, dok su <em>versicolor</em> i <em>virginica</em> djelomično izmiješane</li>
<li><strong>Rand indeks (ARI = 0.73)</strong> pokazuje <strong>dobru usklađenost</strong> klastera s pravim klasama</li>
</ul>
<p><em>Partitioning Around Medoids (PAM) algoritam:</em></p>
<pre class="hljs"><code><div><span class="hljs-comment"># install.packages("cluster")</span>
<span class="hljs-keyword">library</span>(cluster)

<span class="hljs-comment"># Primjena pam algoritma s 3 klastera</span>
set.seed(<span class="hljs-number">123</span>)
pam_result &lt;- pam(iris_features, k = <span class="hljs-number">3</span>)

<span class="hljs-comment"># Prikaz medoida</span>
pam_result$medoids
<span class="hljs-comment">#      Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="hljs-comment"># [1,]          5.0         3.4          1.5         0.2</span>
<span class="hljs-comment"># [2,]          6.0         2.9          4.5         1.5</span>
<span class="hljs-comment"># [3,]          6.8         3.0          5.5         2.1</span>

<span class="hljs-comment"># Prikaz klastera i usporedba sa stvarnim vrstama</span>
table(pam_result$clustering, iris$Species)
<span class="hljs-comment">#   setosa versicolor virginica</span>
<span class="hljs-comment"># 1     50          0         0</span>
<span class="hljs-comment"># 2      0         48        14</span>
<span class="hljs-comment"># 3      0          2        36</span>


clusplot(iris_features, 
         kmeans_result$cluster, 
         color = <span class="hljs-literal">TRUE</span>, shade = <span class="hljs-literal">TRUE</span>, labels = <span class="hljs-number">2</span>, lines = <span class="hljs-number">0</span>, 
         main = <span class="hljs-string">"Clusplot prikaz K-means klastera"</span>)
</div></code></pre>
<p><strong>PAM algoritam</strong> (Partitioning Around Medoids) sličan K-meansu, ali koristi <strong>medoide</strong> umjesto sredina (<em>otporniji na šum i outliere</em>)</p>
<p><img src="images/clusplot.png" alt="alt text"></p>
</div>
</body>
</html>
